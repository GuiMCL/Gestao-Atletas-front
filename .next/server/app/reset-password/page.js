(()=>{var e={};e.id=363,e.ids=[363],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},23740:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.ZP,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>l});var r=t(50482),a=t(69108),o=t(83543),n=t(68300),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);t.d(s,i);let l=["",{children:["reset-password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,53136)),"C:\\Users\\guilherme.almeida\\Documents\\GitHub\\Gestao-Atletas-front\\src\\app\\reset-password\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,56887)),"C:\\Users\\guilherme.almeida\\Documents\\GitHub\\Gestao-Atletas-front\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,24117)),"C:\\Users\\guilherme.almeida\\Documents\\GitHub\\Gestao-Atletas-front\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\guilherme.almeida\\Documents\\GitHub\\Gestao-Atletas-front\\src\\app\\reset-password\\page.tsx"],c="/reset-password/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/reset-password/page",pathname:"/reset-password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},19542:(e,s,t)=>{Promise.resolve().then(t.bind(t,39998))},39998:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(95344),a=t(3729),o=t(8428),n=t(60708),i=t(34034),l=t(10342),d=t(31791);function c(){let e=(0,o.useRouter)(),s=(0,o.useSearchParams)(),[t,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),{register:f,handleSubmit:w,watch:y,formState:{errors:b}}=(0,n.cI)(),j=y("newPassword");(0,a.useEffect)(()=>{let e=s.get("token");e?g(e):c("Token inv\xe1lido ou ausente. Solicite uma nova redefini\xe7\xe3o de senha.")},[s]);let v=async e=>{if(!x){c("Invalid reset token");return}c(""),p(!1),h(!0);try{await (0,d.c0)({token:x,newPassword:e.newPassword}),p(!0)}catch(e){c(e instanceof Error?e.message:"Falha ao redefinir senha. Tente novamente ou solicite um novo link.")}finally{h(!1)}};return u?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Senha redefinida com sucesso"}),r.jsx("div",{className:"mt-4 bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded",children:r.jsx("p",{className:"text-center",children:"Sua senha foi redefinida com sucesso. Agora voc\xea pode fazer login com sua new password."})})]}),r.jsx("div",{className:"mt-6",children:r.jsx(i.z,{type:"button",variant:"primary",fullWidth:!0,onClick:()=>e.push("/login"),children:"Ir para Login"})})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Set new password"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below."})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w(v),children:[t&&r.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:r.jsx("span",{className:"block sm:inline",children:t})}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(l.I,{label:"New Password",type:"password",autoComplete:"new-password",fullWidth:!0,error:b.newPassword?.message,helperText:"Password must be at least 8 characters long",...f("newPassword",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain at least one uppercase letter, one lowercase letter, and one number"}})}),r.jsx(l.I,{label:"Confirm Password",type:"password",autoComplete:"new-password",fullWidth:!0,error:b.confirmPassword?.message,...f("confirmPassword",{required:"Por favor, confirme sua senha",validate:e=>e===j||"Passwords do not match"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(i.z,{type:"submit",variant:"primary",fullWidth:!0,loading:m,disabled:m||!x,children:m?"Redefinindo...":"Redefinir Senha"}),r.jsx(i.z,{type:"button",variant:"outline",fullWidth:!0,onClick:()=>e.push("/login"),disabled:m,children:"Voltar para Login"})]})]})]})})}function u(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}),children:r.jsx(c,{})})}},10342:(e,s,t)=>{"use strict";t.d(s,{I:()=>a});var r=t(95344);let a=(0,t(3729).forwardRef)(({label:e,error:s,helperText:t,fullWidth:a=!1,validationState:o="default",className:n="",id:i,...l},d)=>{let c=i||`input-${Math.random().toString(36).substr(2,9)}`,u=s?"error":o;return(0,r.jsxs)("div",{className:a?"w-full":"",children:[e&&r.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsx("input",{ref:d,id:c,className:`block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400 ${{default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[u]} ${a?"w-full":""} ${n}`,...l}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),t&&!s&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t})]})});a.displayName="Input"},31791:(e,s,t)=>{"use strict";t.d(s,{LH:()=>d,a$:()=>i,c0:()=>n,checkPasswordChange:()=>l,gF:()=>o,x4:()=>a});let r="http://localhost:4000",a=async e=>{let s=await fetch(`${r}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Login failed"}))).message||"Invalid credentials");return s.json()},o=async e=>{let s=await fetch(`${r}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Request failed"}))).message||"Failed to send password reset email")},n=async e=>{let s=await fetch(`${r}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Reset failed"}))).message||"Failed to reset password")};async function i(e){let s=await fetch(`${r}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).error||"Failed to register user");return(await s.json()).user}async function l(e){let s=await fetch(`${r}/api/auth/check-password-change`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw Error((await s.json().catch(()=>({message:"Check failed"}))).message||"Failed to check password change requirement");return s.json()}async function d(e,s){let t=await fetch(`${r}/api/auth/change-password-first-login`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({newPassword:s})});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Change failed"}))).message||"Failed to change password");return t.json()}},53136:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let r=(0,t(86843).createProxy)(String.raw`C:\Users\guilherme.almeida\Documents\GitHub\Gestao-Atletas-front\src\app\reset-password\page.tsx`),{__esModule:a,$$typeof:o}=r,n=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[160,865,454],()=>t(23740));module.exports=r})();