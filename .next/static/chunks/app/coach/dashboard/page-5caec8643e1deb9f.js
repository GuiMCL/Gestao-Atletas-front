(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{82686:function(e,t,a){Promise.resolve().then(a.bind(a,39178))},47907:function(e,t,a){"use strict";var s=a(15313);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},39178:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(3827),n=a(64090),r=a(47907),o=a(37269),i=a(14207),c=a(94065),l=a(54291),d=a(57418),h=a(66651);function m(){let e=(0,r.useRouter)(),{user:t,isLoading:m,isAuthenticated:u,logout:x}=(0,o.a)(),[p,f]=(0,n.useState)(null),[j,g]=(0,n.useState)(null),[v,N]=(0,n.useState)([]),[w,k]=(0,n.useState)(!0),[y,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!m&&!u){e.push("/login");return}if(t&&"COACH"!==t.role&&"ADMIN"!==t.role){e.push("/dashboard");return}t&&C()},[t,u,m,e]);let C=async()=>{if(t)try{k(!0),b(null);let{getAllTeams:e}=await Promise.resolve().then(a.bind(a,14207)),t=await e();if(0===t.length){b("Nenhuma equipe encontrada. Por favor, entre em contato com um administrador."),k(!1);return}let s=t[0].id,n=await (0,i.VP)(s);f(n);let r=await (0,i.P3)(s);console.log("Team statistics loaded:",r),console.log("Total matches:",r.totalMatches),console.log("Wins:",r.wins,"Losses:",r.losses),g(r);let o=(await (0,c.h_)({teamId:s,page:1,pageSize:5})).matches.filter(e=>"SCHEDULED"===e.status||"IN_PROGRESS"===e.status);N(o)}catch(e){console.error("Error loading dashboard data:",e),b("Falha ao carregar os dados do painel. Por favor, tente novamente.")}finally{k(!1)}},L=e=>new Date(e).toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e=>{switch(e){case"SCHEDULED":return"Agendado";case"IN_PROGRESS":return"Em Andamento";case"FINALIZED":return"Finalizado";case"CANCELLED":return"Cancelado";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}},z=e=>{switch(e){case"SCHEDULED":default:return"bg-gray-100 text-gray-800";case"IN_PROGRESS":return"bg-blue-100 text-blue-800";case"FINALIZED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800"}};return m||w?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando painel..."})]})}):y?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)(d.Z,{className:"max-w-md",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-red-600 mb-4",children:y}),(0,s.jsx)(h.z,{onClick:C,children:"Tentar novamente"})]})})}):p&&j?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Painel do Treinador"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:p.name})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>e.push("/coach/matches"),children:"Jogos"}),(0,s.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>e.push("/coach/team/analytics"),children:"An\xe1lises da Equipe"}),(0,s.jsx)(h.z,{variant:"outline",size:"sm",onClick:x,children:"Sair"})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(h.z,{onClick:()=>e.push("/coach/matches/create"),className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,s.jsx)("span",{className:"text-base font-medium",children:"Criar Novo Jogo"})]}),(0,s.jsxs)(h.z,{variant:"outline",onClick:()=>e.push("/coach/team/analytics"),className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,s.jsx)("span",{className:"text-base font-medium",children:"Ver An\xe1lises"})]}),(0,s.jsxs)(h.z,{variant:"outline",onClick:()=>e.push("/coach/athletes"),className:"h-24 flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,s.jsx)("span",{className:"text-base font-medium",children:"Gerenciar Atletas"})]})]})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Desempenho da Equipe"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(l.W,{title:"Total de Jogos",value:j.totalMatches||0,subtitle:"".concat(j.wins||0,"W - ").concat(j.losses||0,"L"),icon:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),(0,s.jsx)(l.W,{title:"Efici\xeancia de Ataque",value:"".concat((100*(j.averageAttackEfficiency||0)).toFixed(1),"%"),subtitle:"M\xe9dia da equipe",icon:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,s.jsx)(l.W,{title:"Efici\xeancia de Saque",value:"".concat((100*(j.averageServeEfficiency||0)).toFixed(1),"%"),subtitle:"M\xe9dia da equipe",icon:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)(l.W,{title:"Registro de Sets",value:"".concat(j.setsWon||0,"-").concat(j.setsLost||0),subtitle:"Ganhos - Perdidos",icon:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Pr\xf3ximos Jogos"}),(0,s.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>e.push("/coach/matches"),children:"Ver Todos os Jogos"})]}),0===v.length?(0,s.jsx)(d.Z,{children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Nenhum jogo agendado"}),(0,s.jsx)(h.z,{onClick:()=>e.push("/coach/matches/create"),children:"Criar Novo Jogo"})]})}):(0,s.jsx)("div",{className:"space-y-3",children:v.map(t=>(0,s.jsx)(d.Z,{hoverable:!0,onClick:()=>{"IN_PROGRESS"===t.status?e.push("/coach/matches/".concat(t.id,"/live")):e.push("/coach/matches/".concat(t.id))},className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,s.jsxs)("div",{className:"text-base font-semibold text-gray-900",children:[t.homeTeam.name," vs ",t.awayTeam.name]}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(z(t.status)),children:E(t.status)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),L(t.date)]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.location]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:["IN_PROGRESS"===t.status&&(0,s.jsx)(h.z,{size:"sm",children:"Ir para Jogo ao Vivo"}),"SCHEDULED"===t.status&&(0,s.jsx)(h.z,{size:"sm",variant:"outline",children:"Ver Detalhes"}),(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},t.id))})]})]})]}):null}},54291:function(e,t,a){"use strict";a.d(t,{W:function(){return n}});var s=a(3827);a(64090);let n=e=>{let{title:t,value:a,trend:n,trendValue:r,icon:o,className:i="",subtitle:c}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 sm:p-6 ".concat(i),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1 truncate",children:t}),(0,s.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 truncate",children:a}),c&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1 truncate",children:c}),n&&r&&(0,s.jsxs)("div",{className:"flex items-center mt-2 text-xs sm:text-sm ".concat({up:"text-green-600",down:"text-red-600",neutral:"text-gray-600"}[n]),children:[(0,s.jsx)("span",{className:"mr-1",children:{up:"↑",down:"↓",neutral:"→"}[n]}),(0,s.jsx)("span",{className:"truncate",children:r})]})]}),o&&(0,s.jsx)("div",{className:"flex-shrink-0 ml-2 sm:ml-4 text-gray-400",children:o})]})})}},14207:function(e,t,a){"use strict";a.d(t,{Cm:function(){return h},LD:function(){return l},P3:function(){return o},VP:function(){return r},Yy:function(){return c},fs:function(){return m},getAllTeams:function(){return d},yw:function(){return i}});var s=a(98793);let n="http://191.252.184.121:4000";async function r(e){let t=(0,s.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team details");return a.json()}async function o(e){let t=(0,s.hP)();console.log("Fetching team statistics for:",e);let a=await fetch("".concat(n,"/api/teams/").concat(e,"/statistics"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Failed to fetch team statistics"}));throw console.error("Team statistics error:",e),Error(e.error||e.message||"Failed to fetch team statistics")}let r=await a.json();return console.log("Team statistics response:",r),r.statistics||r}async function i(e){let t=(0,s.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e,"/athletes"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team athletes");let r=await a.json();return r.athletes||r}async function c(e,t){let a=(0,s.hP)(),r=new URLSearchParams;r.append("metric","totalPoints"),(null==t?void 0:t.startDate)&&r.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&r.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&r.append("opponentTeamId",t.opponent);let o="".concat(n,"/api/teams/").concat(e,"/rankings?").concat(r.toString());console.log("Fetching team rankings:",o);let i=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!i.ok){let e=await i.json().catch(()=>({message:"Failed to fetch team rankings"}));throw console.error("Team rankings error:",e),Error(e.error||e.message||"Failed to fetch team rankings")}let c=await i.json();return console.log("Team rankings response:",c),c.rankings||c}async function l(e,t){let a=(0,s.hP)(),r=new URLSearchParams;(null==t?void 0:t.fundamental)||r.append("metric","attackEfficiency"),(null==t?void 0:t.startDate)&&r.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&r.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&r.append("opponentTeamId",t.opponent),(null==t?void 0:t.fundamental)&&r.append("fundamental",t.fundamental);let o="".concat(n,"/api/teams/").concat(e,"/trends").concat(r.toString()?"?".concat(r.toString()):"");console.log("Fetching team trends:",o);let i=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!i.ok){let e=await i.json().catch(()=>({message:"Failed to fetch team trends"}));throw console.error("Team trends error:",e),Error(e.error||e.message||"Failed to fetch team trends")}let c=await i.json();return console.log("Team trends response:",c),c.trends||c}async function d(){let e=(0,s.hP)(),t=await fetch("".concat(n,"/api/teams"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teams");return(await t.json()).teams}async function h(e){let t=(0,s.hP)(),a=await fetch("".concat(n,"/api/teams"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw Error("Failed to create team");return(await a.json()).team}async function m(e,t){let a=(0,s.hP)(),r=await fetch("".concat(n,"/api/teams/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!r.ok)throw Error("Failed to update team");return(await r.json()).team}}},function(e){e.O(0,[63,971,69,744],function(){return e(e.s=82686)}),_N_E=e.O()}]);