(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{78188:function(e,t,a){Promise.resolve().then(a.bind(a,96736))},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},96736:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(3827),n=a(64090),o=a(47907),s=a(37269),i=a(94065),l=a(14207),c=a(32278);let d=(0,n.forwardRef)((e,t)=>{let{label:a,error:n,helperText:o,fullWidth:s=!1,validationState:i="default",showTime:l=!1,className:c="",id:d,...m}=e,u=d||"datepicker-".concat(Math.random().toString(36).substr(2,9)),h=n?"error":i;return(0,r.jsxs)("div",{className:s?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{ref:t,id:u,type:l?"datetime-local":"date",className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[h]," ").concat(s?"w-full":""," ").concat(c),...m}),n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:n}),o&&!n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o})]})});d.displayName="DatePicker";var m=a(66651),u=a(57418);function h(){var e;let t=(0,o.useRouter)(),{user:a,isLoading:h,isAuthenticated:p}=(0,s.a)(),[x,f]=(0,n.useState)([]),[g,b]=(0,n.useState)([]),[y,j]=(0,n.useState)(!0),[v,N]=(0,n.useState)(!1),[w,T]=(0,n.useState)(null),[k,I]=(0,n.useState)({date:"",location:"",myTeamId:"",opponentTeamName:"",athleteIds:[]}),[P,C]=(0,n.useState)({});(0,n.useEffect)(()=>{if(!h&&!p){t.push("/login");return}if(a&&"COACH"!==a.role&&"ADMIN"!==a.role){t.push("/dashboard");return}a&&S()},[a,p,h,t]);let S=async()=>{try{if(j(!0),T(null),!(null==a?void 0:a.teamId)){T("Voc\xea n\xe3o est\xe1 atribu\xeddo a nenhum time. Por favor, entre em contato com um administrador."),j(!1);return}let e=await (0,l.getAllTeams)();f(e);let t=a.teamId;I(e=>({...e,myTeamId:t})),await E(t)}catch(e){console.error("Error loading coach team:",e),T("Falha ao carregar seu time. Tente novamente.")}finally{j(!1)}},E=async e=>{try{T(null);let t=(await (0,l.yw)(e)).filter(e=>e.isActive);b(t)}catch(e){console.error("Error loading athletes:",e),T("Failed to load team roster. Please try again.")}},D=()=>{let e={};return k.date||(e.date="Match date and time is required"),k.location&&0!==k.location.trim().length||(e.location="Location is required"),k.myTeamId||(e.myTeamId="Your team is required"),k.opponentTeamName&&0!==k.opponentTeamName.trim().length||(e.opponentTeamName="Opponent team name is required"),0===k.athleteIds.length&&(e.athleteIds="At least one athlete must be selected"),C(e),0===Object.keys(e).length},M=async e=>{if(e.preventDefault(),D())try{N(!0),T(null);let e=new Date(k.date).toISOString(),a=await (0,i.qN)({date:e,location:k.location.trim(),myTeamId:k.myTeamId,opponentTeamName:k.opponentTeamName.trim(),athleteIds:k.athleteIds});t.push("/coach/matches/".concat(a.matchId))}catch(e){console.error("Error creating match:",e),T(e instanceof Error?e.message:"Falha ao criar partida. Tente novamente."),N(!1)}},z=e=>{I(t=>({...t,athleteIds:t.athleteIds.includes(e)?t.athleteIds.filter(t=>t!==e):[...t.athleteIds,e]})),P.athleteIds&&C(e=>({...e,athleteIds:void 0}))},F=e=>({SETTER:"Levantador",OUTSIDE_HITTER:"Ponta",OPPOSITE:"Oposto",MIDDLE_BLOCKER:"Central",LIBERO:"L\xedbero"})[e]||e;return h||y?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>t.back(),className:"mr-4 text-gray-600 hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Criar Nova Partida"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Agende uma nova partida e selecione sua escala\xe7\xe3o"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-red-800",children:w})]})}),(0,r.jsxs)("form",{onSubmit:M,children:[(0,r.jsxs)(u.Z,{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalhes da Partida"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d,{label:"Data e Hora da Partida",showTime:!0,fullWidth:!0,value:k.date,onChange:e=>{I(t=>({...t,date:e.target.value})),P.date&&C(e=>({...e,date:void 0}))},error:P.date,required:!0}),(0,r.jsx)(c.I,{label:"Local",type:"text",fullWidth:!0,placeholder:"ex: Gin\xe1sio Principal, Quadra 1",value:k.location,onChange:e=>{I(t=>({...t,location:e.target.value})),P.location&&C(e=>({...e,location:void 0}))},error:P.location,required:!0}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seu Time"}),(0,r.jsx)("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-700",children:(null===(e=x.find(e=>e.id===k.myTeamId))||void 0===e?void 0:e.name)||"Carregando..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Este \xe9 seu time atribu\xeddo"})]}),(0,r.jsx)(c.I,{label:"Nome do Time Advers\xe1rio",type:"text",fullWidth:!0,placeholder:"ex: Clube de Voleibol da Cidade",value:k.opponentTeamName,onChange:e=>{I(t=>({...t,opponentTeamName:e.target.value})),P.opponentTeamName&&C(e=>({...e,opponentTeamName:void 0}))},error:P.opponentTeamName,required:!0})]})]}),(0,r.jsxs)(u.Z,{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Selecionar Atletas"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[k.athleteIds.length," de ",g.length," atletas selecionados"]})]}),(0,r.jsx)(m.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{k.athleteIds.length===g.length?I(e=>({...e,athleteIds:[]})):I(e=>({...e,athleteIds:g.map(e=>e.id)}))},children:k.athleteIds.length===g.length?"Desselecionar Todos":"Selecionar Todos"})]}),P.athleteIds&&(0,r.jsx)("div",{className:"mb-4 text-sm text-red-600",children:P.athleteIds}),k.myTeamId?0===g.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsx)("p",{children:"Nenhum atleta ativo encontrado em seu time."})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.map(e=>(0,r.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors ".concat(k.athleteIds.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[(0,r.jsx)("input",{type:"checkbox",checked:k.athleteIds.includes(e.id),onChange:()=>z(e.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["#",e.jerseyNumber," ",e.name]})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:F(e.position)})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsx)("p",{children:"Por favor, selecione seu time para ver os atletas dispon\xedveis."})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(m.z,{type:"button",variant:"outline",onClick:()=>t.back(),disabled:v,children:"Cancel"}),(0,r.jsx)(m.z,{type:"submit",loading:v,disabled:v||!k.myTeamId,children:"Create Match"})]})]})]})]})}},32278:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(3827);let n=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:n,helperText:o,fullWidth:s=!1,validationState:i="default",className:l="",id:c,...d}=e,m=c||"input-".concat(Math.random().toString(36).substr(2,9)),u=n?"error":i;return(0,r.jsxs)("div",{className:s?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{ref:t,id:m,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[u]," ").concat(s?"w-full":""," ").concat(l),...d}),n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:n}),o&&!n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o})]})});n.displayName="Input"},14207:function(e,t,a){"use strict";a.d(t,{Cm:function(){return m},LD:function(){return c},P3:function(){return s},VP:function(){return o},Yy:function(){return l},fs:function(){return u},getAllTeams:function(){return d},yw:function(){return i}});var r=a(98793);let n="http://191.252.184.121:4000";async function o(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team details");return a.json()}async function s(e){let t=(0,r.hP)();console.log("Fetching team statistics for:",e);let a=await fetch("".concat(n,"/api/teams/").concat(e,"/statistics"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Failed to fetch team statistics"}));throw console.error("Team statistics error:",e),Error(e.error||e.message||"Failed to fetch team statistics")}let o=await a.json();return console.log("Team statistics response:",o),o.statistics||o}async function i(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e,"/athletes"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team athletes");let o=await a.json();return o.athletes||o}async function l(e,t){let a=(0,r.hP)(),o=new URLSearchParams;o.append("metric","totalPoints"),(null==t?void 0:t.startDate)&&o.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&o.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&o.append("opponentTeamId",t.opponent);let s="".concat(n,"/api/teams/").concat(e,"/rankings?").concat(o.toString());console.log("Fetching team rankings:",s);let i=await fetch(s,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!i.ok){let e=await i.json().catch(()=>({message:"Failed to fetch team rankings"}));throw console.error("Team rankings error:",e),Error(e.error||e.message||"Failed to fetch team rankings")}let l=await i.json();return console.log("Team rankings response:",l),l.rankings||l}async function c(e,t){let a=(0,r.hP)(),o=new URLSearchParams;(null==t?void 0:t.fundamental)||o.append("metric","attackEfficiency"),(null==t?void 0:t.startDate)&&o.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&o.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&o.append("opponentTeamId",t.opponent),(null==t?void 0:t.fundamental)&&o.append("fundamental",t.fundamental);let s="".concat(n,"/api/teams/").concat(e,"/trends").concat(o.toString()?"?".concat(o.toString()):"");console.log("Fetching team trends:",s);let i=await fetch(s,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!i.ok){let e=await i.json().catch(()=>({message:"Failed to fetch team trends"}));throw console.error("Team trends error:",e),Error(e.error||e.message||"Failed to fetch team trends")}let l=await i.json();return console.log("Team trends response:",l),l.trends||l}async function d(){let e=(0,r.hP)(),t=await fetch("".concat(n,"/api/teams"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teams");return(await t.json()).teams}async function m(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw Error("Failed to create team");return(await a.json()).team}async function u(e,t){let a=(0,r.hP)(),o=await fetch("".concat(n,"/api/teams/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!o.ok)throw Error("Failed to update team");return(await o.json()).team}}},function(e){e.O(0,[63,971,69,744],function(){return e(e.s=78188)}),_N_E=e.O()}]);