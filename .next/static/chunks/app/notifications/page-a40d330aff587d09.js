(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{99873:function(e,t,a){Promise.resolve().then(a.bind(a,99006))},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},99006:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(3827),n=a(64090),s=a(47907),o=a(37269),i=a(37130),l=a(57418),c=a(66651),d=a(48584),u=a(16010);function m(){let e=(0,s.useRouter)(),{user:t,isLoading:a,isAuthenticated:m,logout:h}=(0,o.a)(),[x,f]=(0,n.useState)([]),[p,g]=(0,n.useState)(0),[b,v]=(0,n.useState)(!0),[j,w]=(0,n.useState)(null),[y,N]=(0,n.useState)(new Set);(0,n.useEffect)(()=>{if(!a&&!m){e.push("/login");return}if(t&&"ATHLETE"!==t.role){e.push("/");return}t&&k()},[t,m,a,e]);let k=async()=>{try{v(!0),w(null);let e=await (0,i.gG)(!0,!1);f(e.notifications),g(e.unreadCount)}catch(e){console.error("Error loading notifications:",e),w("Falha ao carregar notifica\xe7\xf5es. Tente novamente.")}finally{v(!1)}},C=async e=>{if(!y.has(e))try{N(t=>new Set(t).add(e)),await (0,i.Go)(e),f(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),g(e=>Math.max(0,e-1))}catch(e){console.error("Error marking notification as read:",e),w("Failed to mark notification as read.")}finally{N(t=>{let a=new Set(t);return a.delete(e),a})}},S=async e=>{if(!y.has(e)&&confirm("Tem certeza de que deseja deletar esta notifica\xe7\xe3o?"))try{N(t=>new Set(t).add(e)),await (0,i.no)(e);let t=x.find(t=>t.id===e);f(t=>t.filter(t=>t.id!==e)),t&&!t.isRead&&g(e=>Math.max(0,e-1))}catch(e){console.error("Error deleting notification:",e),w("Failed to delete notification.")}finally{N(t=>{let a=new Set(t);return a.delete(e),a})}},E=e=>{let t=new Date(e),a=new Date().getTime()-t.getTime(),r=Math.floor(a/6e4),n=Math.floor(a/36e5),s=Math.floor(a/864e5);return r<1?"Just now":r<60?"".concat(r," minute").concat(r>1?"s":""," ago"):n<24?"".concat(n," hour").concat(n>1?"s":""," ago"):s<7?"".concat(s," day").concat(s>1?"s":""," ago"):t.toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric"})},M=e=>{switch(e){case"MATCH_REPORT":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});case"SYSTEM_UPDATE":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"TEAM_ANNOUNCEMENT":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})});default:return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}},z=e=>{switch(e){case"MATCH_REPORT":return"Match Report";case"SYSTEM_UPDATE":return"System Update";case"TEAM_ANNOUNCEMENT":return"Team Announcement";default:return e}};return a||b?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading notifications..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-1 min-w-0",children:[(0,r.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>e.push("/dashboard"),className:"flex-shrink-0 px-2 sm:px-3","aria-label":"Back to dashboard",children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Back"})]}),(0,r.jsx)("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900 truncate",children:"Notifications"}),p>0&&(0,r.jsx)(d.C,{variant:"info",className:"flex-shrink-0",children:p})]}),(0,r.jsxs)("div",{className:"flex space-x-1 sm:space-x-2 flex-shrink-0",children:[(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>e.push("/profile"),className:"hidden sm:inline-flex",children:"My Profile"}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:h,className:"hidden md:inline-flex",children:"Logout"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 pb-20 md:pb-8",children:[j&&(0,r.jsxs)("div",{className:"mb-3 sm:mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-red-600 text-sm sm:text-base",children:j}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>w(null),className:"mt-2",children:"Dismiss"})]}),0===x.length?(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,r.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,r.jsx)("p",{className:"text-gray-600 text-base sm:text-lg",children:"No notifications"}),(0,r.jsx)("p",{className:"text-gray-500 text-xs sm:text-sm mt-2",children:"You'll see notifications here when you have new updates"})]})}):(0,r.jsx)("div",{className:"space-y-2 sm:space-y-3",children:x.map(e=>(0,r.jsx)(l.Z,{className:"".concat(e.isRead?"bg-white":"border-l-4 border-l-blue-500 bg-blue-50"),padding:"sm",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2 sm:space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 p-1.5 sm:p-2 rounded-full ".concat(e.isRead?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-600"),children:(0,r.jsx)("div",{className:"w-4 h-4 sm:w-6 sm:h-6",children:M(e.type)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1",children:[(0,r.jsx)(d.C,{variant:"MATCH_REPORT"===e.type?"success":"SYSTEM_UPDATE"===e.type?"warning":"default",size:"sm",children:z(e.type)}),!e.isRead&&(0,r.jsx)("span",{className:"inline-flex items-center px-1.5 sm:px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"New"})]}),(0,r.jsx)("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-1 break-words",children:e.title}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-700 mb-2 break-words",children:e.message}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:E(e.createdAt)})]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 mt-3",children:[!e.isRead&&(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>C(e.id),disabled:y.has(e.id),className:"text-xs sm:text-sm w-full sm:w-auto",children:y.has(e.id)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 mr-2"}),"Marking..."]}):"Mark as read"}),(0,r.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>S(e.id),disabled:y.has(e.id),className:"text-red-600 hover:text-red-700 hover:border-red-300 text-xs sm:text-sm w-full sm:w-auto",children:y.has(e.id)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600 mr-2"}),"Deleting..."]}):"Delete"})]})]})]})},e.id))})]}),(0,r.jsx)(u.z,{unreadNotifications:p})]})}},48584:function(e,t,a){"use strict";a.d(t,{C:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{children:t,variant:a="default",size:n="md",className:s=""}=e;return(0,r.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[n]," ").concat(s),children:t})}},66651:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{variant:t="primary",size:a="md",fullWidth:n=!1,loading:s=!1,disabled:o,children:i,className:l="",...c}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]," ").concat(n?"w-full":""," ").concat(l),disabled:o||s,...c,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{children:t,title:a,subtitle:n,footer:s,className:o="",padding:i="md",hoverable:l=!1,onClick:c}=e,d={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return(0,r.jsxs)("div",{className:"".concat("bg-white rounded-lg shadow-md border border-gray-200 transition-all"," ").concat(l?"hover:shadow-lg cursor-pointer active:scale-[0.99]":""," ").concat(c?"cursor-pointer touch-manipulation":""," ").concat(o),onClick:()=>{c&&c()},onKeyDown:e=>{c&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:c?"button":void 0,tabIndex:c?0:void 0,children:[(a||n)&&(0,r.jsxs)("div",{className:"border-b border-gray-200 ".concat(d[i]," pb-3"),children:[a&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),n&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n})]}),(0,r.jsx)("div",{className:d[i],children:t}),s&&(0,r.jsx)("div",{className:"border-t border-gray-200 ".concat(d[i]," pt-3"),children:s})]})}},16010:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(3827);a(64090);var n=a(47907);let s=e=>{let{unreadNotifications:t=0}=e,a=(0,n.useRouter)(),s=(0,n.usePathname)(),o=[{name:"Dashboard",path:"/dashboard",icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{name:"Matches",path:"/matches",icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{name:"Notifications",path:"/notifications",icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),badge:t},{name:"Profile",path:"/profile",icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],i=e=>"/dashboard"===e?s===e:null==s?void 0:s.startsWith(e);return(0,r.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 safe-area-inset-bottom",children:(0,r.jsx)("div",{className:"flex justify-around items-center h-16",children:o.map(e=>(0,r.jsxs)("button",{onClick:()=>a.push(e.path),className:"flex flex-col items-center justify-center flex-1 h-full relative transition-colors touch-manipulation ".concat(i(e.path)?"text-blue-600":"text-gray-600 active:text-blue-500"),"aria-label":e.name,children:[(0,r.jsxs)("div",{className:"relative",children:[e.icon,e.badge&&e.badge>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:e.badge>9?"9+":e.badge})]}),(0,r.jsx)("span",{className:"text-xs mt-1 font-medium",children:e.name}),i(e.path)&&(0,r.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-1 bg-blue-600 rounded-t-full"})]},e.path))})})}},37269:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var r=a(64090),n=a(47907),s=a(98793);let o=()=>{let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(null),[o,i]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(()=>{let t=(0,s.hP)(),r=(0,s.PR)();t&&r?(0,s.pw)(t)?((0,s.DH)(),a(null),c(!1),e.push("/login")):(a(r),c(!0)):(a(null),c(!1)),i(!1)})()},[e]),{user:t,isLoading:o,isAuthenticated:l,logout:()=>{(0,s.DH)(),a(null),c(!1),e.push("/login")}}}},37130:function(e,t,a){"use strict";a.d(t,{Go:function(){return o},gG:function(){return s},no:function(){return i},tn:function(){return l}});var r=a(98793);let n="http://191.252.184.121:4000";async function s(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(0,r.hP)();if(!a)throw Error("No authentication token found");let s=new URLSearchParams;void 0!==e&&s.append("includeRead",e.toString()),void 0!==t&&s.append("includeExpired",t.toString());let o=await fetch("".concat(n,"/notifications?").concat(s.toString()),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!o.ok)throw Error((await o.json().catch(()=>({error:"Failed to fetch notifications"}))).error||"Failed to fetch notifications");return o.json()}async function o(e){let t=(0,r.hP)();if(!t)throw Error("No authentication token found");let a=await fetch("".concat(n,"/notifications/").concat(e,"/read"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Failed to mark notification as read"}))).error||"Failed to mark notification as read");return(await a.json()).notification}async function i(e){let t=(0,r.hP)();if(!t)throw Error("No authentication token found");let a=await fetch("".concat(n,"/notifications/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Failed to delete notification"}))).error||"Failed to delete notification")}async function l(){return(await s(!1,!1)).unreadCount}},98793:function(e,t,a){"use strict";a.d(t,{DH:function(){return d},PR:function(){return c},av:function(){return l},hP:function(){return i},pw:function(){return m},vD:function(){return o}});let r="volleyball_access_token",n="volleyball_refresh_token",s="volleyball_user",o=e=>{localStorage.setItem(r,e.accessToken),localStorage.setItem(n,e.refreshToken)},i=()=>localStorage.getItem(r),l=e=>{localStorage.setItem(s,JSON.stringify(e))},c=()=>{let e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},d=()=>{localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(s)},u=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return null}},m=e=>{let t=u(e);if(!t||!t.exp)return!0;let a=Date.now()/1e3;return t.exp<a}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=99873)}),_N_E=e.O()}]);