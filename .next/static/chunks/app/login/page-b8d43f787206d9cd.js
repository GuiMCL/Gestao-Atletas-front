(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5534:function(e,t,r){Promise.resolve().then(r.bind(r,60378))},60378:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(3827),s=r(64090),n=r(47907),o=r(82670),c=r(66651),i=r(32278),l=r(73884),u=r(98793);function d(){var e,t;let d=(0,n.useRouter)(),[h,g]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),{register:p,handleSubmit:b,formState:{errors:y}}=(0,o.cI)(),x=async e=>{g(""),f(!0);try{let t=await (0,l.x4)(e);(0,u.vD)({accessToken:t.accessToken,refreshToken:t.refreshToken}),(0,u.av)(t.user);try{let{checkPasswordChange:e}=await Promise.resolve().then(r.bind(r,73884));if((await e(t.accessToken)).needsPasswordChange){d.push("/change-password-first-login");return}}catch(e){console.warn("Could not check password change requirement:",e)}switch(t.user.role){case"ATHLETE":d.push("/dashboard");break;case"COACH":d.push("/coach/dashboard");break;case"ADMIN":d.push("/admin/dashboard");break;default:d.push("/")}}catch(e){g(e instanceof Error?e.message:"Falha no login, tente novamente.")}finally{f(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Gerenciamento de Voleibol"})}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:b(x),children:[h&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:h})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.I,{label:"Nome de usu\xe1rio",type:"text",autoComplete:"username",fullWidth:!0,error:null===(e=y.username)||void 0===e?void 0:e.message,...p("username",{required:"Nome de usu\xe1rio \xe9 obrigat\xf3rio",minLength:{value:3,message:"O nome de usu\xe1rio deve ter pelo menos 3 caracteres"}})}),(0,a.jsx)(i.I,{label:"Senha",type:"password",autoComplete:"current-password",fullWidth:!0,error:null===(t=y.password)||void 0===t?void 0:t.message,...p("password",{required:"Senha \xe9 obrigat\xf3ria",minLength:{value:6,message:"A senha deve ter pelo menos 6 caracteres"}})})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("a",{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Esqueceu sua senha?"})})}),(0,a.jsx)("div",{children:(0,a.jsx)(c.z,{type:"submit",variant:"primary",fullWidth:!0,loading:m,disabled:m,children:m?"Entrando...":"Entrar"})})]})]})})}},66651:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var a=r(3827);r(64090);let s=e=>{let{variant:t="primary",size:r="md",fullWidth:s=!1,loading:n=!1,disabled:o,children:c,className:i="",...l}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(s?"w-full":""," ").concat(i),disabled:o||n,...l,children:[n&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})}},32278:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var a=r(3827);let s=(0,r(64090).forwardRef)((e,t)=>{let{label:r,error:s,helperText:n,fullWidth:o=!1,validationState:c="default",className:i="",id:l,...u}=e,d=l||"input-".concat(Math.random().toString(36).substr(2,9)),h=s?"error":c;return(0,a.jsxs)("div",{className:o?"w-full":"",children:[r&&(0,a.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,a.jsx)("input",{ref:t,id:d,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[h]," ").concat(o?"w-full":""," ").concat(i),...u}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),n&&!s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});s.displayName="Input"},73884:function(e,t,r){"use strict";r.d(t,{LH:function(){return l},a$:function(){return c},c0:function(){return o},checkPasswordChange:function(){return i},gF:function(){return n},x4:function(){return s}});let a="http://191.252.184.121:4000",s=async e=>{let t=await fetch("".concat(a,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Login failed"}))).message||"Invalid credentials");return t.json()},n=async e=>{let t=await fetch("".concat(a,"/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Request failed"}))).message||"Failed to send password reset email")},o=async e=>{let t=await fetch("".concat(a,"/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Reset failed"}))).message||"Failed to reset password")};async function c(e){let t=await fetch("".concat(a,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to register user");return(await t.json()).user}async function i(e){let t=await fetch("".concat(a,"/api/auth/check-password-change"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Check failed"}))).message||"Failed to check password change requirement");return t.json()}async function l(e,t){let r=await fetch("".concat(a,"/api/auth/change-password-first-login"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!r.ok)throw Error((await r.json().catch(()=>({message:"Change failed"}))).message||"Failed to change password");return r.json()}},98793:function(e,t,r){"use strict";r.d(t,{DH:function(){return u},PR:function(){return l},av:function(){return i},hP:function(){return c},pw:function(){return h},vD:function(){return o}});let a="volleyball_access_token",s="volleyball_refresh_token",n="volleyball_user",o=e=>{localStorage.setItem(a,e.accessToken),localStorage.setItem(s,e.refreshToken)},c=()=>localStorage.getItem(a),i=e=>{localStorage.setItem(n,JSON.stringify(e))},l=()=>{let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},u=()=>{localStorage.removeItem(a),localStorage.removeItem(s),localStorage.removeItem(n)},d=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch(e){return null}},h=e=>{let t=d(e);if(!t||!t.exp)return!0;let r=Date.now()/1e3;return t.exp<r}}},function(e){e.O(0,[884,971,69,744],function(){return e(e.s=5534)}),_N_E=e.O()}]);