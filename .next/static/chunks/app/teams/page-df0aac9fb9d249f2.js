(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{63695:function(e,t,a){Promise.resolve().then(a.bind(a,63760))},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},63760:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(3827),n=a(64090),s=a(37269),o=a(66651),c=a(57418),i=a(6145),l=a(14207);function d(){let{isAuthenticated:e,isLoading:t}=(0,s.a)(),[a,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(!0),[h,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{!t&&e&&p()},[t,e]);let p=async()=>{try{m(!0),g(null);let e=await (0,l.getAllTeams)();d(e)}catch(e){g("Falha ao carregar times"),console.error(e)}finally{m(!1)}};return t||u?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando times..."})]})}):e?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Teams"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"View all teams and their performance analytics"})]}),(0,r.jsx)(o.z,{variant:"outline",onClick:()=>window.location.href="/dashboard",children:"Voltar para Painel"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-red-800",children:h}),(0,r.jsx)(o.z,{variant:"secondary",size:"sm",className:"mt-2",onClick:p,children:"Tentar Novamente"})]}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["All Teams (",a.length,")"]})}),0===a.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"No teams found"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Contact an administrator to create teams"})]}):(0,r.jsx)(i.w,{data:a,columns:[{key:"name",header:"Team Name",sortable:!0,render:e=>(0,r.jsx)("span",{className:"font-semibold text-gray-900 text-lg",children:e})},{key:"athleteCount",header:"Athletes",sortable:!0,render:e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,r.jsxs)("span",{className:"text-gray-700 font-medium",children:[e||0," athletes"]})]})},{key:"id",header:"Actions",render:(e,t)=>(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(o.z,{variant:"primary",size:"sm",onClick:e=>{e.stopPropagation(),window.location.href="/coach/team/analytics?teamId=".concat(t.id)},children:"View Analytics"})})}],onRowClick:e=>{window.location.href="/coach/team/analytics?teamId=".concat(e.id)}})]})})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"max-w-md",children:(0,r.jsxs)("div",{className:"text-center p-6",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Por favor, fa\xe7a login para visualizar times"}),(0,r.jsx)(o.z,{onClick:()=>window.location.href="/login",children:"Ir para Login"})]})})})}},66651:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{variant:t="primary",size:a="md",fullWidth:n=!1,loading:s=!1,disabled:o,children:c,className:i="",...l}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]," ").concat(n?"w-full":""," ").concat(i),disabled:o||s,...l,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{children:t,title:a,subtitle:n,footer:s,className:o="",padding:c="md",hoverable:i=!1,onClick:l}=e,d={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return(0,r.jsxs)("div",{className:"".concat("bg-white rounded-lg shadow-md border border-gray-200 transition-all"," ").concat(i?"hover:shadow-lg cursor-pointer active:scale-[0.99]":""," ").concat(l?"cursor-pointer touch-manipulation":""," ").concat(o),onClick:()=>{l&&l()},onKeyDown:e=>{l&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l())},role:l?"button":void 0,tabIndex:l?0:void 0,children:[(a||n)&&(0,r.jsxs)("div",{className:"border-b border-gray-200 ".concat(d[c]," pb-3"),children:[a&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),n&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n})]}),(0,r.jsx)("div",{className:d[c],children:t}),s&&(0,r.jsx)("div",{className:"border-t border-gray-200 ".concat(d[c]," pt-3"),children:s})]})}},6145:function(e,t,a){"use strict";a.d(t,{w:function(){return s}});var r=a(3827),n=a(64090);function s(e){let{data:t,columns:a,onRowClick:s,pagination:o=!1,pageSize:c=10,className:i="",emptyMessage:l="No data available"}=e,[d,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[g,p]=(0,n.useState)(1),x=(e,t)=>{t&&(d===e?"asc"===m?h("desc"):"desc"===m&&(h(null),u(null)):(u(e),h("asc")))},f=(0,n.useMemo)(()=>d&&m?[...t].sort((e,t)=>{let a=e[d],r=t[d];if(a===r)return 0;let n=a<r?-1:1;return"asc"===m?n:-n}):t,[t,d,m]),y=(0,n.useMemo)(()=>{if(!o)return f;let e=(g-1)*c;return f.slice(e,e+c)},[f,o,g,c]),b=Math.ceil(t.length/c),j=e=>{p(e)},v=e=>d!==e?"⇅":"asc"===m?"↑":"desc"===m?"↓":"⇅";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden ".concat(i),children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:a.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(e.sortable?"cursor-pointer hover:bg-gray-100":""),style:{width:e.width},onClick:()=>x(e.key,e.sortable),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:e.header}),e.sortable&&(0,r.jsx)("span",{className:"text-gray-400",children:v(e.key)})]})},e.key))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===y.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length,className:"px-6 py-8 text-center text-sm text-gray-500",children:l})}):y.map((e,t)=>(0,r.jsx)("tr",{className:"".concat(s?"cursor-pointer hover:bg-gray-50":""," transition-colors"),onClick:()=>null==s?void 0:s(e),children:a.map(t=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e[t.key],e):e[t.key]},t.key))},t))})]})}),o&&b>1&&(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(g-1)*c+1," to"," ",Math.min(g*c,t.length)," of ",t.length," results"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>j(g-1),disabled:1===g,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:b},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 text-sm font-medium rounded-md ".concat(g===e?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e)),(0,r.jsx)("button",{onClick:()=>j(g+1),disabled:g===b,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}},37269:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var r=a(64090),n=a(47907),s=a(98793);let o=()=>{let e=(0,n.useRouter)(),[t,a]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(()=>{let t=(0,s.hP)(),r=(0,s.PR)();t&&r?(0,s.pw)(t)?((0,s.DH)(),a(null),l(!1),e.push("/login")):(a(r),l(!0)):(a(null),l(!1)),c(!1)})()},[e]),{user:t,isLoading:o,isAuthenticated:i,logout:()=>{(0,s.DH)(),a(null),l(!1),e.push("/login")}}}},14207:function(e,t,a){"use strict";a.d(t,{Cm:function(){return u},LD:function(){return l},P3:function(){return o},VP:function(){return s},Yy:function(){return i},fs:function(){return m},getAllTeams:function(){return d},yw:function(){return c}});var r=a(98793);let n="http://191.252.184.121:4000";async function s(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team details");return a.json()}async function o(e){let t=(0,r.hP)();console.log("Fetching team statistics for:",e);let a=await fetch("".concat(n,"/api/teams/").concat(e,"/statistics"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Failed to fetch team statistics"}));throw console.error("Team statistics error:",e),Error(e.error||e.message||"Failed to fetch team statistics")}let s=await a.json();return console.log("Team statistics response:",s),s.statistics||s}async function c(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e,"/athletes"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team athletes");let s=await a.json();return s.athletes||s}async function i(e,t){let a=(0,r.hP)(),s=new URLSearchParams;s.append("metric","totalPoints"),(null==t?void 0:t.startDate)&&s.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&s.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&s.append("opponentTeamId",t.opponent);let o="".concat(n,"/api/teams/").concat(e,"/rankings?").concat(s.toString());console.log("Fetching team rankings:",o);let c=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!c.ok){let e=await c.json().catch(()=>({message:"Failed to fetch team rankings"}));throw console.error("Team rankings error:",e),Error(e.error||e.message||"Failed to fetch team rankings")}let i=await c.json();return console.log("Team rankings response:",i),i.rankings||i}async function l(e,t){let a=(0,r.hP)(),s=new URLSearchParams;(null==t?void 0:t.fundamental)||s.append("metric","attackEfficiency"),(null==t?void 0:t.startDate)&&s.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&s.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&s.append("opponentTeamId",t.opponent),(null==t?void 0:t.fundamental)&&s.append("fundamental",t.fundamental);let o="".concat(n,"/api/teams/").concat(e,"/trends").concat(s.toString()?"?".concat(s.toString()):"");console.log("Fetching team trends:",o);let c=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!c.ok){let e=await c.json().catch(()=>({message:"Failed to fetch team trends"}));throw console.error("Team trends error:",e),Error(e.error||e.message||"Failed to fetch team trends")}let i=await c.json();return console.log("Team trends response:",i),i.trends||i}async function d(){let e=(0,r.hP)(),t=await fetch("".concat(n,"/api/teams"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teams");return(await t.json()).teams}async function u(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw Error("Failed to create team");return(await a.json()).team}async function m(e,t){let a=(0,r.hP)(),s=await fetch("".concat(n,"/api/teams/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!s.ok)throw Error("Failed to update team");return(await s.json()).team}},98793:function(e,t,a){"use strict";a.d(t,{DH:function(){return d},PR:function(){return l},av:function(){return i},hP:function(){return c},pw:function(){return m},vD:function(){return o}});let r="volleyball_access_token",n="volleyball_refresh_token",s="volleyball_user",o=e=>{localStorage.setItem(r,e.accessToken),localStorage.setItem(n,e.refreshToken)},c=()=>localStorage.getItem(r),i=e=>{localStorage.setItem(s,JSON.stringify(e))},l=()=>{let e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},d=()=>{localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(s)},u=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return null}},m=e=>{let t=u(e);if(!t||!t.exp)return!0;let a=Date.now()/1e3;return t.exp<a}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=63695)}),_N_E=e.O()}]);