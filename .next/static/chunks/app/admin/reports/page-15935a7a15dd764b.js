(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{38157:function(e,t,s){Promise.resolve().then(s.bind(s,25662))},47907:function(e,t,s){"use strict";var a=s(15313);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},25662:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(3827),r=s(64090),n=s(47907),l=s(37269),i=s(66651),d=s(57418),o=s(6145),c=s(48584),x=s(94065);function m(){let e=(0,n.useRouter)(),{user:t,isLoading:s}=(0,l.a)(),[m,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[g,b]=(0,r.useState)(null),[f,y]=(0,r.useState)("FINALIZED");(0,r.useEffect)(()=>{if(!s&&!t){e.push("/login");return}if(t&&"ADMIN"!==t.role){e.push("/dashboard");return}},[t,s,e]),(0,r.useEffect)(()=>{t&&"ADMIN"===t.role&&j()},[t,f]);let j=async()=>{try{p(!0),b(null);let e=await (0,x.h_)({status:f,pageSize:100});u(e.matches.map(e=>({...e,exportFormat:"pdf"})))}catch(e){b(e instanceof Error?e.message:"Falha ao carregar partidas")}finally{p(!1)}},v=(e,t)=>{u(s=>s.map(s=>s.id===e?{...s,exportFormat:t}:s))},N=async(e,t)=>{try{u(t=>t.map(t=>t.id===e?{...t,isExporting:!0}:t));let s=await (0,x.FD)(e,t),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a;let n=m.find(t=>t.id===e),l=(null==n?void 0:n.date)?new Date(n.date).toISOString().split("T")[0]:"unknown";r.download="match-report-".concat(l,"-").concat(e.substring(0,8),".").concat(t),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}catch(e){alert(e instanceof Error?e.message:"Failed to export report")}finally{u(t=>t.map(t=>t.id===e?{...t,isExporting:!1}:t))}},w=e=>{switch(e){case"FINALIZED":return"success";case"IN_PROGRESS":return"warning";case"SCHEDULED":return"info";default:return"default"}},k=[{key:"date",header:"Date",sortable:!0,render:e=>new Date(e).toLocaleDateString()},{key:"location",header:"Location",sortable:!0},{key:"awayTeam",header:"Opponent",sortable:!0,render:(e,t)=>t.awayTeam.name},{key:"status",header:"Status",sortable:!0,render:e=>(0,a.jsx)(c.C,{variant:w(e),children:e})},{key:"exportFormat",header:"Export Format",render:(e,t)=>(0,a.jsxs)("select",{value:t.exportFormat||"pdf",onChange:e=>v(t.id,e.target.value),disabled:t.isExporting,className:"block px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,a.jsx)("option",{value:"pdf",children:"PDF"}),(0,a.jsx)("option",{value:"xlsx",children:"XLSX"}),(0,a.jsx)("option",{value:"json",children:"JSON"})]})},{key:"id",header:"Actions",render:(t,s)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{size:"sm",onClick:e=>{e.stopPropagation(),N(s.id,s.exportFormat||"pdf")},disabled:s.isExporting||"FINALIZED"!==s.status,children:s.isExporting?"Exporting...":"Export"}),(0,a.jsx)(i.z,{size:"sm",variant:"secondary",onClick:t=>{t.stopPropagation(),e.push("/matches/".concat(s.id))},children:"View"})]})}];return s||t&&"ADMIN"!==t.role?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports & Exports"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Export match reports in PDF, XLSX, or JSON format"})]}),(0,a.jsx)(i.z,{variant:"secondary",onClick:()=>e.push("/admin/dashboard"),children:"Voltar para Painel"})]})}),(0,a.jsx)(d.Z,{className:"mb-6",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),(0,a.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-48 block px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,a.jsx)("option",{value:"",children:"All Matches"}),(0,a.jsx)("option",{value:"FINALIZED",children:"Finalized"}),(0,a.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,a.jsx)("option",{value:"SCHEDULED",children:"Scheduled"})]}),(0,a.jsx)(i.z,{size:"sm",variant:"secondary",onClick:j,children:"Refresh"})]})})}),(0,a.jsx)(d.Z,{className:"mb-6 bg-blue-50 border-blue-200",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Export Information"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"PDF:"})," Formatted report with all match statistics, team data, and athlete performance"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"XLSX:"})," Spreadsheet with separate sheets for metadata, team stats, sets, and athletes"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"JSON:"})," Complete data export for API integration and custom processing"]}),(0,a.jsx)("li",{children:"Only finalized matches can be exported"})]})})]})]})})}),(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Available Reports"}),g&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:g})}),h?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando partidas..."})]}):0===m.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No matches found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:f?"No ".concat(f.toLowerCase()," matches available."):"No matches available for export."})]}):(0,a.jsx)(o.w,{data:m,columns:k,pagination:!0})]})})]})})}},48584:function(e,t,s){"use strict";s.d(t,{C:function(){return r}});var a=s(3827);s(64090);let r=e=>{let{children:t,variant:s="default",size:r="md",className:n=""}=e;return(0,a.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[s]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[r]," ").concat(n),children:t})}},6145:function(e,t,s){"use strict";s.d(t,{w:function(){return n}});var a=s(3827),r=s(64090);function n(e){let{data:t,columns:s,onRowClick:n,pagination:l=!1,pageSize:i=10,className:d="",emptyMessage:o="No data available"}=e,[c,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(1),g=(e,t)=>{t&&(c===e?"asc"===m?u("desc"):"desc"===m&&(u(null),x(null)):(x(e),u("asc")))},b=(0,r.useMemo)(()=>c&&m?[...t].sort((e,t)=>{let s=e[c],a=t[c];if(s===a)return 0;let r=s<a?-1:1;return"asc"===m?r:-r}):t,[t,c,m]),f=(0,r.useMemo)(()=>{if(!l)return b;let e=(h-1)*i;return b.slice(e,e+i)},[b,l,h,i]),y=Math.ceil(t.length/i),j=e=>{p(e)},v=e=>c!==e?"⇅":"asc"===m?"↑":"desc"===m?"↓":"⇅";return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden ".concat(d),children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:s.map(e=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(e.sortable?"cursor-pointer hover:bg-gray-100":""),style:{width:e.width},onClick:()=>g(e.key,e.sortable),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:e.header}),e.sortable&&(0,a.jsx)("span",{className:"text-gray-400",children:v(e.key)})]})},e.key))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===f.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:s.length,className:"px-6 py-8 text-center text-sm text-gray-500",children:o})}):f.map((e,t)=>(0,a.jsx)("tr",{className:"".concat(n?"cursor-pointer hover:bg-gray-50":""," transition-colors"),onClick:()=>null==n?void 0:n(e),children:s.map(t=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e[t.key],e):e[t.key]},t.key))},t))})]})}),l&&y>1&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(h-1)*i+1," to"," ",Math.min(h*i,t.length)," of ",t.length," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>j(h-1),disabled:1===h,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:y},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 text-sm font-medium rounded-md ".concat(h===e?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>j(h+1),disabled:h===y,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}}},function(e){e.O(0,[63,971,69,744],function(){return e(e.s=38157)}),_N_E=e.O()}]);