(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{27056:function(e,t,a){Promise.resolve().then(a.bind(a,96338))},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},96338:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(3827),s=a(64090),n=a(47907),o=a(37269),l=a(66651),c=a(57418),i=a(70492),d=a(32278),m=a(79173),u=a(6145),h=a(14207);function g(){let e=(0,n.useRouter)(),{user:t,isLoading:a,isAuthenticated:g}=(0,o.a)(),[x,p]=(0,s.useState)([]),[f,b]=(0,s.useState)([]),[y,j]=(0,s.useState)(!0),[v,w]=(0,s.useState)(null),[N,k]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[S,I]=(0,s.useState)({homeTeamId:"",awayTeamId:"",date:"",time:"",location:""}),[D,P]=(0,s.useState)({name:"",selectedTeams:[],startDate:"",location:"",matchesPerDay:"2"}),[E,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!a&&!g){e.push("/login");return}if(t&&"ADMIN"!==t.role){e.push("/dashboard");return}t&&z()},[t,g,a,e]);let z=async()=>{try{j(!0);let[e,t]=await Promise.all([(0,h.getAllTeams)(),L()]);p(e)}catch(e){console.error("Error loading data:",e),w("Falha ao carregar dados")}finally{j(!1)}},L=async()=>{try{let e=await fetch("".concat("http://localhost:4000","/api/matches"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("volleyball_access_token"))}});if(!e.ok)throw Error("Failed to fetch matches");let t=await e.json();return b(t.matches||[]),t.matches||[]}catch(e){return console.error("Error loading matches:",e),[]}},F=async()=>{if(!S.homeTeamId||!S.awayTeamId||!S.date||!S.time||!S.location){w("Por favor, preencha todos os campos obrigat\xf3rios");return}if(S.homeTeamId===S.awayTeamId){w("Home and away teams must be different");return}try{M(!0),w(null);let e=new Date("".concat(S.date,"T").concat(S.time));if(!(await fetch("".concat("http://localhost:4000","/api/matches"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("volleyball_access_token")),"Content-Type":"application/json"},body:JSON.stringify({homeTeamId:S.homeTeamId,awayTeamId:S.awayTeamId,date:e.toISOString(),location:S.location})})).ok)throw Error("Failed to create match");k(!1),_(),await L()}catch(e){console.error("Error creating match:",e),w("Falha ao criar partida")}finally{M(!1)}},A=async()=>{if(!D.name||D.selectedTeams.length<2||!D.startDate||!D.location){w("Por favor, preencha todos os campos obrigat\xf3rios e selecione pelo menos 2 times");return}try{M(!0),w(null);let e=D.selectedTeams,t=[];for(let a=0;a<e.length;a++)for(let r=a+1;r<e.length;r++)t.push({homeTeamId:e[a],awayTeamId:e[r]});let a=new Date(D.startDate),r=parseInt(D.matchesPerDay);for(let e=0;e<t.length;e++){let s=Math.floor(e/r),n=new Date(a);n.setDate(n.getDate()+s);let o=e%r;n.setHours(18+2*o,0,0,0),await fetch("".concat("http://localhost:4000","/api/matches"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("volleyball_access_token")),"Content-Type":"application/json"},body:JSON.stringify({homeTeamId:t[e].homeTeamId,awayTeamId:t[e].awayTeamId,date:n.toISOString(),location:D.location})})}C(!1),R(),await L()}catch(e){console.error("Error creating tournament:",e),w("Falha ao criar partidas do torneio")}finally{M(!1)}},_=()=>{I({homeTeamId:"",awayTeamId:"",date:"",time:"",location:""}),w(null)},R=()=>{P({name:"",selectedTeams:[],startDate:"",location:"",matchesPerDay:"2"}),w(null)},B=e=>new Date(e).toLocaleDateString("pt-BR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),H=e=>{switch(e){case"SCHEDULED":return"bg-blue-100 text-blue-800";case"IN_PROGRESS":return"bg-green-100 text-green-800";case"FINALIZED":default:return"bg-gray-100 text-gray-800";case"CANCELLED":return"bg-red-100 text-red-800"}},V=[{key:"date",header:"Date & Time",sortable:!0,render:e=>(0,r.jsx)("span",{className:"text-gray-900",children:B(e)})},{key:"homeTeam",header:"Match",render:(e,t)=>(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[t.homeTeam.name," vs ",t.awayTeam.name]})},{key:"location",header:"Location",sortable:!0,render:e=>(0,r.jsx)("span",{className:"text-gray-700",children:e})},{key:"status",header:"Status",sortable:!0,render:e=>(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(H(e)),children:O(e)})}];return a||y?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Match Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage matches and tournaments"})]}),(0,r.jsx)(l.z,{variant:"outline",onClick:()=>e.push("/admin/dashboard"),children:"Voltar para Painel"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(l.z,{onClick:()=>k(!0),className:"h-20 flex items-center justify-center gap-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{className:"text-lg font-medium",children:"Create Single Match"})]}),(0,r.jsxs)(l.z,{variant:"secondary",onClick:()=>C(!0),className:"h-20 flex items-center justify-center gap-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,r.jsx)("span",{className:"text-lg font-medium",children:"Create Tournament"})]})]}),v&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-800",children:v})}),(0,r.jsx)(c.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["All Matches (",f.length,")"]}),0===f.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"No matches created yet"}),(0,r.jsx)(l.z,{variant:"secondary",className:"mt-4",onClick:()=>k(!0),children:"Create First Match"})]}):(0,r.jsx)(u.w,{data:f,columns:V})]})}),(0,r.jsx)(i.u,{isOpen:N,onClose:()=>k(!1),title:"Create New Match",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Team *"}),(0,r.jsx)(m.P,{value:S.homeTeamId,onChange:e=>I({...S,homeTeamId:e.target.value}),options:[{value:"",label:"Select home team"},...x.map(e=>({value:e.id,label:e.name}))],disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Away Team *"}),(0,r.jsx)(m.P,{value:S.awayTeamId,onChange:e=>I({...S,awayTeamId:e.target.value}),options:[{value:"",label:"Select away team"},...x.map(e=>({value:e.id,label:e.name}))],disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,r.jsx)(d.I,{type:"date",value:S.date,onChange:e=>I({...S,date:e.target.value}),disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),(0,r.jsx)(d.I,{type:"time",value:S.time,onChange:e=>I({...S,time:e.target.value}),disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),(0,r.jsx)(d.I,{type:"text",value:S.location,onChange:e=>I({...S,location:e.target.value}),placeholder:"Match location",disabled:E})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(l.z,{variant:"secondary",onClick:()=>k(!1),disabled:E,children:"Cancel"}),(0,r.jsx)(l.z,{onClick:F,disabled:E,children:E?"Creating...":"Create Match"})]})]})}),(0,r.jsx)(i.u,{isOpen:T,onClose:()=>C(!1),title:"Create Tournament (Round-Robin)",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tournament Name *"}),(0,r.jsx)(d.I,{type:"text",value:D.name,onChange:e=>P({...D,name:e.target.value}),placeholder:"Tournament name",disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Teams * (minimum 2)"}),(0,r.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-300 rounded-lg p-3",children:x.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[(0,r.jsx)("input",{type:"checkbox",checked:D.selectedTeams.includes(e.id),onChange:t=>{t.target.checked?P({...D,selectedTeams:[...D.selectedTeams,e.id]}):P({...D,selectedTeams:D.selectedTeams.filter(t=>t!==e.id)})},disabled:E,className:"rounded"}),(0,r.jsx)("span",{className:"text-gray-900",children:e.name})]},e.id))}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[D.selectedTeams.length," teams selected"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,r.jsx)(d.I,{type:"date",value:D.startDate,onChange:e=>P({...D,startDate:e.target.value}),disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),(0,r.jsx)(d.I,{type:"text",value:D.location,onChange:e=>P({...D,location:e.target.value}),placeholder:"Tournament location",disabled:E})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Matches Per Day"}),(0,r.jsx)(m.P,{value:D.matchesPerDay,onChange:e=>P({...D,matchesPerDay:e.target.value}),options:[{value:"1",label:"1 match per day"},{value:"2",label:"2 matches per day"},{value:"3",label:"3 matches per day"},{value:"4",label:"4 matches per day"}],disabled:E})]}),D.selectedTeams.length>=2&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:["This will create ",D.selectedTeams.length*(D.selectedTeams.length-1)/2," matches (round-robin format)"]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(l.z,{variant:"secondary",onClick:()=>C(!1),disabled:E,children:"Cancel"}),(0,r.jsx)(l.z,{onClick:A,disabled:E||D.selectedTeams.length<2,children:E?"Creating...":"Create Tournament"})]})]})})]})]})}},66651:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(3827);a(64090);let s=e=>{let{variant:t="primary",size:a="md",fullWidth:s=!1,loading:n=!1,disabled:o,children:l,className:c="",...i}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]," ").concat(s?"w-full":""," ").concat(c),disabled:o||n,...i,children:[n&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(3827);a(64090);let s=e=>{let{children:t,title:a,subtitle:s,footer:n,className:o="",padding:l="md",hoverable:c=!1,onClick:i}=e,d={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return(0,r.jsxs)("div",{className:"".concat("bg-white rounded-lg shadow-md border border-gray-200 transition-all"," ").concat(c?"hover:shadow-lg cursor-pointer active:scale-[0.99]":""," ").concat(i?"cursor-pointer touch-manipulation":""," ").concat(o),onClick:()=>{i&&i()},onKeyDown:e=>{i&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i())},role:i?"button":void 0,tabIndex:i?0:void 0,children:[(a||s)&&(0,r.jsxs)("div",{className:"border-b border-gray-200 ".concat(d[l]," pb-3"),children:[a&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),s&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),(0,r.jsx)("div",{className:d[l],children:t}),n&&(0,r.jsx)("div",{className:"border-t border-gray-200 ".concat(d[l]," pt-3"),children:n})]})}},6145:function(e,t,a){"use strict";a.d(t,{w:function(){return n}});var r=a(3827),s=a(64090);function n(e){let{data:t,columns:a,onRowClick:n,pagination:o=!1,pageSize:l=10,className:c="",emptyMessage:i="No data available"}=e,[d,m]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[g,x]=(0,s.useState)(1),p=(e,t)=>{t&&(d===e?"asc"===u?h("desc"):"desc"===u&&(h(null),m(null)):(m(e),h("asc")))},f=(0,s.useMemo)(()=>d&&u?[...t].sort((e,t)=>{let a=e[d],r=t[d];if(a===r)return 0;let s=a<r?-1:1;return"asc"===u?s:-s}):t,[t,d,u]),b=(0,s.useMemo)(()=>{if(!o)return f;let e=(g-1)*l;return f.slice(e,e+l)},[f,o,g,l]),y=Math.ceil(t.length/l),j=e=>{x(e)},v=e=>d!==e?"⇅":"asc"===u?"↑":"desc"===u?"↓":"⇅";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden ".concat(c),children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:a.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(e.sortable?"cursor-pointer hover:bg-gray-100":""),style:{width:e.width},onClick:()=>p(e.key,e.sortable),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:e.header}),e.sortable&&(0,r.jsx)("span",{className:"text-gray-400",children:v(e.key)})]})},e.key))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===b.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length,className:"px-6 py-8 text-center text-sm text-gray-500",children:i})}):b.map((e,t)=>(0,r.jsx)("tr",{className:"".concat(n?"cursor-pointer hover:bg-gray-50":""," transition-colors"),onClick:()=>null==n?void 0:n(e),children:a.map(t=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e[t.key],e):e[t.key]},t.key))},t))})]})}),o&&y>1&&(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(g-1)*l+1," to"," ",Math.min(g*l,t.length)," of ",t.length," results"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>j(g-1),disabled:1===g,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:y},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 text-sm font-medium rounded-md ".concat(g===e?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e)),(0,r.jsx)("button",{onClick:()=>j(g+1),disabled:g===y,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}},32278:function(e,t,a){"use strict";a.d(t,{I:function(){return s}});var r=a(3827);let s=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:s,helperText:n,fullWidth:o=!1,validationState:l="default",className:c="",id:i,...d}=e,m=i||"input-".concat(Math.random().toString(36).substr(2,9)),u=s?"error":l;return(0,r.jsxs)("div",{className:o?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{ref:t,id:m,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[u]," ").concat(o?"w-full":""," ").concat(c),...d}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),n&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});s.displayName="Input"},70492:function(e,t,a){"use strict";a.d(t,{u:function(){return n}});var r=a(3827),s=a(64090);let n=e=>{let{isOpen:t,onClose:a,title:n,children:o,size:l="md"}=e,c=(0,s.useRef)(null);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",onClick:e=>{e.target===e.currentTarget&&a()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,r.jsxs)("div",{ref:c,className:"relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[l]," mx-4 bg-white rounded-lg shadow-xl transform transition-all duration-300 scale-100 opacity-100"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:n}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-6",children:o})]})}):null}},79173:function(e,t,a){"use strict";a.d(t,{P:function(){return s}});var r=a(3827);let s=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:s,helperText:n,fullWidth:o=!1,validationState:l="default",options:c,placeholder:i,className:d="",id:m,...u}=e,h=m||"select-".concat(Math.random().toString(36).substr(2,9)),g=s?"error":l;return(0,r.jsxs)("div",{className:o?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:h,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsxs)("select",{ref:t,id:h,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[g]," ").concat(o?"w-full":""," ").concat(d),...u,children:[i&&(0,r.jsx)("option",{value:"",disabled:!0,children:i}),c.map(e=>(0,r.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),n&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});s.displayName="Select"},37269:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var r=a(64090),s=a(47907),n=a(98793);let o=()=>{let e=(0,s.useRouter)(),[t,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(()=>{let t=(0,n.hP)(),r=(0,n.PR)();t&&r?(0,n.pw)(t)?((0,n.DH)(),a(null),i(!1),e.push("/login")):(a(r),i(!0)):(a(null),i(!1)),l(!1)})()},[e]),{user:t,isLoading:o,isAuthenticated:c,logout:()=>{(0,n.DH)(),a(null),i(!1),e.push("/login")}}}},14207:function(e,t,a){"use strict";a.d(t,{Cm:function(){return m},LD:function(){return i},P3:function(){return o},VP:function(){return n},Yy:function(){return c},fs:function(){return u},getAllTeams:function(){return d},yw:function(){return l}});var r=a(98793);let s="http://localhost:4000";async function n(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/teams/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team details");return a.json()}async function o(e){let t=(0,r.hP)();console.log("Fetching team statistics for:",e);let a=await fetch("".concat(s,"/api/teams/").concat(e,"/statistics"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Failed to fetch team statistics"}));throw console.error("Team statistics error:",e),Error(e.error||e.message||"Failed to fetch team statistics")}let n=await a.json();return console.log("Team statistics response:",n),n.statistics||n}async function l(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/teams/").concat(e,"/athletes"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team athletes");let n=await a.json();return n.athletes||n}async function c(e,t){let a=(0,r.hP)(),n=new URLSearchParams;n.append("metric","totalPoints"),(null==t?void 0:t.startDate)&&n.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&n.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&n.append("opponentTeamId",t.opponent);let o="".concat(s,"/api/teams/").concat(e,"/rankings?").concat(n.toString());console.log("Fetching team rankings:",o);let l=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json().catch(()=>({message:"Failed to fetch team rankings"}));throw console.error("Team rankings error:",e),Error(e.error||e.message||"Failed to fetch team rankings")}let c=await l.json();return console.log("Team rankings response:",c),c.rankings||c}async function i(e,t){let a=(0,r.hP)(),n=new URLSearchParams;(null==t?void 0:t.fundamental)||n.append("metric","attackEfficiency"),(null==t?void 0:t.startDate)&&n.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&n.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&n.append("opponentTeamId",t.opponent),(null==t?void 0:t.fundamental)&&n.append("fundamental",t.fundamental);let o="".concat(s,"/api/teams/").concat(e,"/trends").concat(n.toString()?"?".concat(n.toString()):"");console.log("Fetching team trends:",o);let l=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json().catch(()=>({message:"Failed to fetch team trends"}));throw console.error("Team trends error:",e),Error(e.error||e.message||"Failed to fetch team trends")}let c=await l.json();return console.log("Team trends response:",c),c.trends||c}async function d(){let e=(0,r.hP)(),t=await fetch("".concat(s,"/api/teams"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teams");return(await t.json()).teams}async function m(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/teams"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw Error("Failed to create team");return(await a.json()).team}async function u(e,t){let a=(0,r.hP)(),n=await fetch("".concat(s,"/api/teams/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!n.ok)throw Error("Failed to update team");return(await n.json()).team}},98793:function(e,t,a){"use strict";a.d(t,{DH:function(){return d},PR:function(){return i},av:function(){return c},hP:function(){return l},pw:function(){return u},vD:function(){return o}});let r="volleyball_access_token",s="volleyball_refresh_token",n="volleyball_user",o=e=>{localStorage.setItem(r,e.accessToken),localStorage.setItem(s,e.refreshToken)},l=()=>localStorage.getItem(r),c=e=>{localStorage.setItem(n,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},d=()=>{localStorage.removeItem(r),localStorage.removeItem(s),localStorage.removeItem(n)},m=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return null}},u=e=>{let t=m(e);if(!t||!t.exp)return!0;let a=Date.now()/1e3;return t.exp<a}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=27056)}),_N_E=e.O()}]);