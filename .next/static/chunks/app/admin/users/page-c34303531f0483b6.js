(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{46383:function(e,t,a){Promise.resolve().then(a.bind(a,86914))},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},86914:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(3827),s=a(64090),n=a(47907),l=a(37269);let o="http://191.252.184.121:4000";function i(){return localStorage.getItem("volleyball_access_token")}async function c(){let e=i(),t=await fetch("".concat(o,"/api/users"),{method:"GET",headers:{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Failed to fetch users"}))).error||"Failed to fetch users");return t.json()}async function d(e,t){let a=i(),r=await fetch("".concat(o,"/api/users/").concat(e,"/role"),{method:"PUT",headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)}},body:JSON.stringify(t)});if(!r.ok)throw Error((await r.json().catch(()=>({message:"Failed to update user role"}))).error||"Failed to update user role");return r.json()}async function u(e){let t=i(),a=await fetch("".concat(o,"/api/users/assign-credentials"),{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)}},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json().catch(()=>({message:"Failed to assign credentials"}))).error||"Failed to assign credentials");return a.json()}async function h(e){let t=i(),a=await fetch("".concat(o,"/api/users/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)}}});if(!a.ok)throw Error((await a.json().catch(()=>({message:"Failed to delete user"}))).error||"Failed to delete user")}var m=a(66100),x=a(66651),g=a(32278),p=a(79173),f=a(70492),y=a(48584);function b(){let e=(0,n.useRouter)(),{user:t,isLoading:a}=(0,l.a)(),[o,i]=(0,s.useState)([]),[b,j]=(0,s.useState)([]),[v,w]=(0,s.useState)(!0),[N,C]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[A,E]=(0,s.useState)(!1),[P,F]=(0,s.useState)(!1),[T,z]=(0,s.useState)(null),[I,L]=(0,s.useState)(null),[O,D]=(0,s.useState)(null),[M,R]=(0,s.useState)({athleteId:"",username:"",email:"",password:""}),[B,_]=(0,s.useState)({role:"ATHLETE"});(0,s.useEffect)(()=>{if(!a&&!t){e.push("/login");return}if(t&&"ADMIN"!==t.role){e.push("/dashboard");return}t&&U()},[t,a,e]);let U=async()=>{try{w(!0),L(null);let[e,t]=await Promise.all([c(),(0,m.uz)({activeOnly:!1})]);i(e),j(t)}catch(r){var t,a;if(console.error("Failed to load data:",r),(null===(t=r.message)||void 0===t?void 0:t.includes("Unauthorized"))||(null===(a=r.message)||void 0===a?void 0:a.includes("401"))){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),e.push("/login");return}L(r.message||"Falha ao carregar usu\xe1rios e atletas")}finally{w(!1)}},H=async e=>{e.preventDefault(),L(null),D(null);try{await u(M),D("Credentials assigned successfully"),await U(),E(!1),G()}catch(e){console.error("Failed to assign credentials:",e),L(e.message||"Falha ao atribuir credenciais")}},J=async e=>{if(e.preventDefault(),T){L(null),D(null);try{await d(T.id,B),D("Fun\xe7\xe3o do usu\xe1rio atualizada com sucesso"),await U(),F(!1),z(null)}catch(e){console.error("Failed to update role:",e),L(e.message||"Falha ao atualizar fun\xe7\xe3o")}}},q=async e=>{if(confirm("Tem certeza de que deseja deletar este usu\xe1rio? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")){L(null),D(null);try{await h(e),D("Usu\xe1rio deletado com sucesso"),await U()}catch(e){console.error("Failed to delete user:",e),L(e.message||"Falha ao deletar usu\xe1rio")}}},W=e=>{z(e),_({role:e.role}),F(!0)},G=()=>{R({athleteId:"",username:"",email:"",password:""})},V=b.filter(e=>!o.some(t=>{var a;return(null===(a=t.athlete)||void 0===a?void 0:a.id)===e.id})),$=o.filter(e=>{var t;let a=e.username.toLowerCase().includes(N.toLowerCase())||e.email.toLowerCase().includes(N.toLowerCase())||((null===(t=e.athlete)||void 0===t?void 0:t.name)||"").toLowerCase().includes(N.toLowerCase()),r=!k||e.role===k;return a&&r});return a||v?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage user accounts, credentials, and roles"})]}),I&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-800",children:I})}),O&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-green-800",children:O})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(g.I,{type:"text",placeholder:"Search by username, email, or name...",value:N,onChange:e=>C(e.target.value)})}),(0,r.jsx)("div",{children:(0,r.jsx)(p.P,{value:k,onChange:e=>S(e.target.value),options:[{value:"",label:"All Roles"},{value:"ATHLETE",label:"Athletes"},{value:"COACH",label:"Coaches"},{value:"ADMIN",label:"Admins"}]})}),(0,r.jsx)("div",{children:(0,r.jsx)(x.z,{onClick:()=>{G(),E(!0)},className:"w-full",disabled:0===V.length,children:"Assign Credentials"})})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Username"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete Profile"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.username})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)(y.C,{variant:"ADMIN"===e.role?"error":"COACH"===e.role?"warning":"success",children:e.role})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.athlete?(0,r.jsxs)("div",{className:"text-sm text-gray-900",children:[e.athlete.name," (#",e.athlete.jerseyNumber,")"]}):(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"-"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>W(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Change Role"}),(0,r.jsx)("button",{onClick:()=>q(e.id),className:"text-red-600 hover:text-red-900",children:"Deletar"})]})]},e.id))})]}),0===$.length&&(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No users found"})})]}),(0,r.jsx)(f.u,{isOpen:A,onClose:()=>{E(!1),G(),L(null)},title:"Assign Credentials to Athlete",children:(0,r.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Athlete"}),(0,r.jsx)(p.P,{required:!0,value:M.athleteId,onChange:e=>R({...M,athleteId:e.target.value}),options:[{value:"",label:"Select an athlete"},...V.map(e=>({value:e.id,label:"".concat(e.name," (#").concat(e.jerseyNumber,")")}))]}),0===V.length&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"All athletes already have credentials assigned"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,r.jsx)(g.I,{type:"text",required:!0,minLength:3,maxLength:50,value:M.username,onChange:e=>R({...M,username:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)(g.I,{type:"email",required:!0,value:M.email,onChange:e=>R({...M,email:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,r.jsx)(g.I,{type:"password",required:!0,minLength:8,value:M.password,onChange:e=>R({...M,password:e.target.value})}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum 8 characters"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(x.z,{type:"button",variant:"secondary",onClick:()=>{E(!1),G(),L(null)},children:"Cancel"}),(0,r.jsx)(x.z,{type:"submit",disabled:0===V.length,children:"Assign Credentials"})]})]})}),(0,r.jsx)(f.u,{isOpen:P,onClose:()=>{F(!1),z(null),L(null)},title:"Atualizar Fun\xe7\xe3o do Usu\xe1rio",children:(0,r.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[T&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:"Username:"})," ",T.username]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",T.email]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:"Current Role:"})," ",T.role]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Role"}),(0,r.jsx)(p.P,{required:!0,value:B.role,onChange:e=>_({role:e.target.value}),options:[{value:"ATHLETE",label:"Athlete"},{value:"COACH",label:"Coach"},{value:"ADMIN",label:"Admin"}]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)(x.z,{type:"button",variant:"secondary",onClick:()=>{F(!1),z(null),L(null)},children:"Cancel"}),(0,r.jsx)(x.z,{type:"submit",children:"Atualizar Fun\xe7\xe3o"})]})]})})]})})}},48584:function(e,t,a){"use strict";a.d(t,{C:function(){return s}});var r=a(3827);a(64090);let s=e=>{let{children:t,variant:a="default",size:s="md",className:n=""}=e;return(0,r.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[s]," ").concat(n),children:t})}},66651:function(e,t,a){"use strict";a.d(t,{z:function(){return s}});var r=a(3827);a(64090);let s=e=>{let{variant:t="primary",size:a="md",fullWidth:s=!1,loading:n=!1,disabled:l,children:o,className:i="",...c}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]," ").concat(s?"w-full":""," ").concat(i),disabled:l||n,...c,children:[n&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]})}},32278:function(e,t,a){"use strict";a.d(t,{I:function(){return s}});var r=a(3827);let s=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:s,helperText:n,fullWidth:l=!1,validationState:o="default",className:i="",id:c,...d}=e,u=c||"input-".concat(Math.random().toString(36).substr(2,9)),h=s?"error":o;return(0,r.jsxs)("div",{className:l?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{ref:t,id:u,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[h]," ").concat(l?"w-full":""," ").concat(i),...d}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),n&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});s.displayName="Input"},70492:function(e,t,a){"use strict";a.d(t,{u:function(){return n}});var r=a(3827),s=a(64090);let n=e=>{let{isOpen:t,onClose:a,title:n,children:l,size:o="md"}=e,i=(0,s.useRef)(null);return((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",onClick:e=>{e.target===e.currentTarget&&a()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,r.jsxs)("div",{ref:i,className:"relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[o]," mx-4 bg-white rounded-lg shadow-xl transform transition-all duration-300 scale-100 opacity-100"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:n}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-6",children:l})]})}):null}},79173:function(e,t,a){"use strict";a.d(t,{P:function(){return s}});var r=a(3827);let s=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:s,helperText:n,fullWidth:l=!1,validationState:o="default",options:i,placeholder:c,className:d="",id:u,...h}=e,m=u||"select-".concat(Math.random().toString(36).substr(2,9)),x=s?"error":o;return(0,r.jsxs)("div",{className:l?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsxs)("select",{ref:t,id:m,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[x]," ").concat(l?"w-full":""," ").concat(d),...h,children:[c&&(0,r.jsx)("option",{value:"",disabled:!0,children:c}),i.map(e=>(0,r.jsx)("option",{value:e.value,disabled:e.disabled,children:e.label},e.value))]}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:s}),n&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});s.displayName="Select"},37269:function(e,t,a){"use strict";a.d(t,{a:function(){return l}});var r=a(64090),s=a(47907),n=a(98793);let l=()=>{let e=(0,s.useRouter)(),[t,a]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(()=>{let t=(0,n.hP)(),r=(0,n.PR)();t&&r?(0,n.pw)(t)?((0,n.DH)(),a(null),c(!1),e.push("/login")):(a(r),c(!0)):(a(null),c(!1)),o(!1)})()},[e]),{user:t,isLoading:l,isAuthenticated:i,logout:()=>{(0,n.DH)(),a(null),c(!1),e.push("/login")}}}},66100:function(e,t,a){"use strict";a.d(t,{$D:function(){return c},E2:function(){return m},Ef:function(){return d},Ex:function(){return o},PM:function(){return h},getMyAthleteProfile:function(){return n},sh:function(){return l},uz:function(){return u},yw:function(){return i}});var r=a(98793);let s="http://191.252.184.121:4000";async function n(){let e=(0,r.hP)();console.log("[getMyAthleteProfile] API_BASE_URL:",s),console.log("[getMyAthleteProfile] Fetching:","".concat(s,"/api/athletes/me"));let t=await fetch("".concat(s,"/api/athletes/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(console.log("[getMyAthleteProfile] Response status:",t.status),!t.ok){let e=await t.json().catch(()=>({message:"Failed to fetch athlete profile"}));throw console.error("[getMyAthleteProfile] Error:",e),Error(e.error||e.message||"Failed to fetch athlete profile")}let a=await t.json();return console.log("[getMyAthleteProfile] Data received:",a),a}async function l(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/athletes/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch athlete profile");return a.json()}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=(0,r.hP)(),l=await fetch("".concat(s,"/api/athletes/").concat(e,"/matches?page=").concat(t,"&pageSize=").concat(a),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(!l.ok)throw Error("Failed to fetch athlete matches");return l.json()}async function i(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/matches/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch match details");return a.json()}async function c(e,t){let a=(0,r.hP)(),n=await fetch("".concat(s,"/api/athletes/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw Error("Failed to update athlete profile");return n.json()}async function d(e,t){let a=(0,r.hP)(),n=new FormData;n.append("photo",t);let l=await fetch("".concat(s,"/api/athletes/").concat(e,"/photo"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:n});if(!l.ok)throw Error("Failed to upload photo");return(await l.json()).photoUrl}async function u(e){let t=(0,r.hP)(),a=new URLSearchParams;(null==e?void 0:e.teamId)&&a.append("teamId",e.teamId),(null==e?void 0:e.activeOnly)&&a.append("activeOnly","true"),(null==e?void 0:e.search)&&a.append("search",e.search);let n=await fetch("".concat(s,"/api/athletes?").concat(a.toString()),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!n.ok)throw Error("Failed to fetch athletes");return(await n.json()).athletes}async function h(e){let t=(0,r.hP)(),a=await fetch("".concat(s,"/api/athletes"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json()).error||"Failed to create athlete");return(await a.json()).athlete}async function m(e){let t=(0,r.hP)();if(!(await fetch("".concat(s,"/api/athletes/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok)throw Error("Failed to deactivate athlete")}},98793:function(e,t,a){"use strict";a.d(t,{DH:function(){return d},PR:function(){return c},av:function(){return i},hP:function(){return o},pw:function(){return h},vD:function(){return l}});let r="volleyball_access_token",s="volleyball_refresh_token",n="volleyball_user",l=e=>{localStorage.setItem(r,e.accessToken),localStorage.setItem(s,e.refreshToken)},o=()=>localStorage.getItem(r),i=e=>{localStorage.setItem(n,JSON.stringify(e))},c=()=>{let e=localStorage.getItem(n);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},d=()=>{localStorage.removeItem(r),localStorage.removeItem(s),localStorage.removeItem(n)},u=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return null}},h=e=>{let t=u(e);if(!t||!t.exp)return!0;let a=Date.now()/1e3;return t.exp<a}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=46383)}),_N_E=e.O()}]);