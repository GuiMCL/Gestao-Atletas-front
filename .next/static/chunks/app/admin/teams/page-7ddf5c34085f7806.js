(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{29636:function(e,t,a){Promise.resolve().then(a.bind(a,63120))},63120:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(3827),n=a(64090),s=a(66651),o=a(57418),l=a(70492),i=a(32278),c=a(6145),d=a(14207);function m(){let[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(!1),[p,y]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!1),[j,v]=(0,n.useState)(""),[w,N]=(0,n.useState)(null),[k,C]=(0,n.useState)([]),[S,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{z()},[]);let z=async()=>{try{m(!0),h(null);let e=await (0,d.getAllTeams)();t(e)}catch(e){h("Falha ao carregar times"),console.error(e)}finally{m(!1)}},P=async()=>{if(!j.trim()){h("Nome do time \xe9 obrigat\xf3rio");return}try{T(!0),h(null),await (0,d.Cm)(j.trim()),g(!1),v(""),await z()}catch(e){h("Falha ao criar time"),console.error(e)}finally{T(!1)}},E=async()=>{if(!w||!j.trim()){h("Nome do time \xe9 obrigat\xf3rio");return}try{T(!0),h(null),await (0,d.fs)(w.id,j.trim()),y(!1),v(""),N(null),await z()}catch(e){h("Falha ao atualizar time"),console.error(e)}finally{T(!1)}},F=e=>{N(e),v(e.name),y(!0)},A=async e=>{N(e),b(!0);try{let t=await (0,d.yw)(e.id);C(t)}catch(e){console.error("Failed to load roster:",e),C([])}},D=()=>{g(!1),v(""),h(null)},I=()=>{y(!1),v(""),N(null),h(null)},_=()=>{b(!1),N(null),C([])};return a?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Carregando times..."})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Team Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage teams and view team rosters"})]}),(0,r.jsx)(s.z,{onClick:()=>g(!0),children:"Create Team"})]})}),u&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-800",children:u})}),(0,r.jsx)(o.Z,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"All Teams"}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"No teams found"}),(0,r.jsx)(s.z,{variant:"secondary",className:"mt-4",onClick:()=>g(!0),children:"Create Your First Team"})]}):(0,r.jsx)(c.w,{data:e,columns:[{key:"name",header:"Team Name",sortable:!0,render:e=>(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e})},{key:"athleteCount",header:"Athletes",sortable:!0,render:e=>(0,r.jsx)("span",{className:"text-gray-600",children:e||0})},{key:"id",header:"Actions",render:(e,t)=>(0,r.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,r.jsx)(s.z,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),F(t)},children:"Edit"}),(0,r.jsx)(s.z,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),A(t)},children:"Roster"}),(0,r.jsx)(s.z,{variant:"primary",size:"sm",onClick:e=>{e.stopPropagation(),window.location.href="/coach/team/analytics?teamId=".concat(t.id)},children:"Analytics"})]})}],onRowClick:e=>A(e)})]})}),(0,r.jsx)(l.u,{isOpen:x,onClose:D,title:"Create New Team",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),(0,r.jsx)(i.I,{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:"Enter team name",disabled:S})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(s.z,{variant:"secondary",onClick:D,disabled:S,children:"Cancel"}),(0,r.jsx)(s.z,{onClick:P,disabled:S||!j.trim(),children:S?"Creating...":"Create Team"})]})]})}),(0,r.jsx)(l.u,{isOpen:p,onClose:I,title:"Edit Team",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name"}),(0,r.jsx)(i.I,{type:"text",value:j,onChange:e=>v(e.target.value),placeholder:"Enter team name",disabled:S})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(s.z,{variant:"secondary",onClick:I,disabled:S,children:"Cancel"}),(0,r.jsx)(s.z,{onClick:E,disabled:S||!j.trim(),children:S?"Saving...":"Save Changes"})]})]})}),(0,r.jsx)(l.u,{isOpen:f,onClose:_,title:"".concat((null==w?void 0:w.name)||"Team"," Roster"),children:(0,r.jsxs)("div",{className:"space-y-4",children:[0===k.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-600",children:"No athletes in this team"})}):(0,r.jsx)(c.w,{data:k,columns:[{key:"jerseyNumber",header:"Jersey #",sortable:!0,render:e=>(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:["#",e]})},{key:"name",header:"Name",sortable:!0,render:e=>(0,r.jsx)("span",{className:"text-gray-900",children:e})},{key:"position",header:"Position",sortable:!0,render:e=>(0,r.jsx)("span",{className:"text-gray-600",children:e.replace(/_/g," ")})},{key:"isActive",header:"Status",sortable:!0,render:e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e?"Active":"Inactive"})}]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(s.z,{variant:"secondary",onClick:_,children:"Close"})})]})})]})})}},66651:function(e,t,a){"use strict";a.d(t,{z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{variant:t="primary",size:a="md",fullWidth:n=!1,loading:s=!1,disabled:o,children:l,className:i="",...c}=e;return(0,r.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a]," ").concat(n?"w-full":""," ").concat(i),disabled:o||s,...c,children:[s&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(3827);a(64090);let n=e=>{let{children:t,title:a,subtitle:n,footer:s,className:o="",padding:l="md",hoverable:i=!1,onClick:c}=e,d={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return(0,r.jsxs)("div",{className:"".concat("bg-white rounded-lg shadow-md border border-gray-200 transition-all"," ").concat(i?"hover:shadow-lg cursor-pointer active:scale-[0.99]":""," ").concat(c?"cursor-pointer touch-manipulation":""," ").concat(o),onClick:()=>{c&&c()},onKeyDown:e=>{c&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},role:c?"button":void 0,tabIndex:c?0:void 0,children:[(a||n)&&(0,r.jsxs)("div",{className:"border-b border-gray-200 ".concat(d[l]," pb-3"),children:[a&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),n&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n})]}),(0,r.jsx)("div",{className:d[l],children:t}),s&&(0,r.jsx)("div",{className:"border-t border-gray-200 ".concat(d[l]," pt-3"),children:s})]})}},6145:function(e,t,a){"use strict";a.d(t,{w:function(){return s}});var r=a(3827),n=a(64090);function s(e){let{data:t,columns:a,onRowClick:s,pagination:o=!1,pageSize:l=10,className:i="",emptyMessage:c="No data available"}=e,[d,m]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(1),p=(e,t)=>{t&&(d===e?"asc"===u?h("desc"):"desc"===u&&(h(null),m(null)):(m(e),h("asc")))},y=(0,n.useMemo)(()=>d&&u?[...t].sort((e,t)=>{let a=e[d],r=t[d];if(a===r)return 0;let n=a<r?-1:1;return"asc"===u?n:-n}):t,[t,d,u]),f=(0,n.useMemo)(()=>{if(!o)return y;let e=(x-1)*l;return y.slice(e,e+l)},[y,o,x,l]),b=Math.ceil(t.length/l),j=e=>{g(e)},v=e=>d!==e?"⇅":"asc"===u?"↑":"desc"===u?"↓":"⇅";return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden ".concat(i),children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:a.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(e.sortable?"cursor-pointer hover:bg-gray-100":""),style:{width:e.width},onClick:()=>p(e.key,e.sortable),children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{children:e.header}),e.sortable&&(0,r.jsx)("span",{className:"text-gray-400",children:v(e.key)})]})},e.key))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===f.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:a.length,className:"px-6 py-8 text-center text-sm text-gray-500",children:c})}):f.map((e,t)=>(0,r.jsx)("tr",{className:"".concat(s?"cursor-pointer hover:bg-gray-50":""," transition-colors"),onClick:()=>null==s?void 0:s(e),children:a.map(t=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e[t.key],e):e[t.key]},t.key))},t))})]})}),o&&b>1&&(0,r.jsxs)("div",{className:"bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(x-1)*l+1," to"," ",Math.min(x*l,t.length)," of ",t.length," results"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>j(x-1),disabled:1===x,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:b},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>j(e),className:"px-3 py-1 text-sm font-medium rounded-md ".concat(x===e?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e)),(0,r.jsx)("button",{onClick:()=>j(x+1),disabled:x===b,className:"px-3 py-1 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}},32278:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var r=a(3827);let n=(0,a(64090).forwardRef)((e,t)=>{let{label:a,error:n,helperText:s,fullWidth:o=!1,validationState:l="default",className:i="",id:c,...d}=e,m=c||"input-".concat(Math.random().toString(36).substr(2,9)),u=n?"error":l;return(0,r.jsxs)("div",{className:o?"w-full":"",children:[a&&(0,r.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,r.jsx)("input",{ref:t,id:m,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[u]," ").concat(o?"w-full":""," ").concat(i),...d}),n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:n}),s&&!n&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s})]})});n.displayName="Input"},70492:function(e,t,a){"use strict";a.d(t,{u:function(){return s}});var r=a(3827),n=a(64090);let s=e=>{let{isOpen:t,onClose:a,title:s,children:o,size:l="md"}=e,i=(0,n.useRef)(null);return((0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300",onClick:e=>{e.target===e.currentTarget&&a()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,r.jsxs)("div",{ref:i,className:"relative w-full ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[l]," mx-4 bg-white rounded-lg shadow-xl transform transition-all duration-300 scale-100 opacity-100"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,r.jsx)("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900",children:s}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-6",children:o})]})}):null}},14207:function(e,t,a){"use strict";a.d(t,{Cm:function(){return m},LD:function(){return c},P3:function(){return o},VP:function(){return s},Yy:function(){return i},fs:function(){return u},getAllTeams:function(){return d},yw:function(){return l}});var r=a(98793);let n="http://localhost:4000";async function s(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team details");return a.json()}async function o(e){let t=(0,r.hP)();console.log("Fetching team statistics for:",e);let a=await fetch("".concat(n,"/api/teams/").concat(e,"/statistics"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json().catch(()=>({message:"Failed to fetch team statistics"}));throw console.error("Team statistics error:",e),Error(e.error||e.message||"Failed to fetch team statistics")}let s=await a.json();return console.log("Team statistics response:",s),s.statistics||s}async function l(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams/").concat(e,"/athletes"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch team athletes");let s=await a.json();return s.athletes||s}async function i(e,t){let a=(0,r.hP)(),s=new URLSearchParams;s.append("metric","totalPoints"),(null==t?void 0:t.startDate)&&s.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&s.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&s.append("opponentTeamId",t.opponent);let o="".concat(n,"/api/teams/").concat(e,"/rankings?").concat(s.toString());console.log("Fetching team rankings:",o);let l=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json().catch(()=>({message:"Failed to fetch team rankings"}));throw console.error("Team rankings error:",e),Error(e.error||e.message||"Failed to fetch team rankings")}let i=await l.json();return console.log("Team rankings response:",i),i.rankings||i}async function c(e,t){let a=(0,r.hP)(),s=new URLSearchParams;(null==t?void 0:t.fundamental)||s.append("metric","attackEfficiency"),(null==t?void 0:t.startDate)&&s.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&s.append("endDate",t.endDate),(null==t?void 0:t.opponent)&&s.append("opponentTeamId",t.opponent),(null==t?void 0:t.fundamental)&&s.append("fundamental",t.fundamental);let o="".concat(n,"/api/teams/").concat(e,"/trends").concat(s.toString()?"?".concat(s.toString()):"");console.log("Fetching team trends:",o);let l=await fetch(o,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json().catch(()=>({message:"Failed to fetch team trends"}));throw console.error("Team trends error:",e),Error(e.error||e.message||"Failed to fetch team trends")}let i=await l.json();return console.log("Team trends response:",i),i.trends||i}async function d(){let e=(0,r.hP)(),t=await fetch("".concat(n,"/api/teams"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch teams");return(await t.json()).teams}async function m(e){let t=(0,r.hP)(),a=await fetch("".concat(n,"/api/teams"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!a.ok)throw Error("Failed to create team");return(await a.json()).team}async function u(e,t){let a=(0,r.hP)(),s=await fetch("".concat(n,"/api/teams/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!s.ok)throw Error("Failed to update team");return(await s.json()).team}},98793:function(e,t,a){"use strict";a.d(t,{DH:function(){return d},PR:function(){return c},av:function(){return i},hP:function(){return l},pw:function(){return u},vD:function(){return o}});let r="volleyball_access_token",n="volleyball_refresh_token",s="volleyball_user",o=e=>{localStorage.setItem(r,e.accessToken),localStorage.setItem(n,e.refreshToken)},l=()=>localStorage.getItem(r),i=e=>{localStorage.setItem(s,JSON.stringify(e))},c=()=>{let e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},d=()=>{localStorage.removeItem(r),localStorage.removeItem(n),localStorage.removeItem(s)},m=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return null}},u=e=>{let t=m(e);if(!t||!t.exp)return!0;let a=Date.now()/1e3;return t.exp<a}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=29636)}),_N_E=e.O()}]);