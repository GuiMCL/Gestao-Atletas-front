(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{44271:function(e,t,r){Promise.resolve().then(r.bind(r,77078))},77078:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(3827),a=r(64090),n=r(47907),o=r(82670),i=r(66651),c=r(32278),l=r(73884);function d(){var e,t;let r=(0,n.useRouter)(),d=(0,n.useSearchParams)(),[u,h]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),[x,w]=(0,a.useState)(null),{register:y,handleSubmit:b,watch:j,formState:{errors:v}}=(0,o.cI)(),N=j("newPassword");(0,a.useEffect)(()=>{let e=d.get("token");e?w(e):h("Token inv\xe1lido ou ausente. Solicite uma nova redefini\xe7\xe3o de senha.")},[d]);let k=async e=>{if(!x){h("Invalid reset token");return}h(""),f(!1),p(!0);try{await (0,l.c0)({token:x,newPassword:e.newPassword}),f(!0)}catch(e){h(e instanceof Error?e.message:"Falha ao redefinir senha. Tente novamente ou solicite um novo link.")}finally{p(!1)}};return m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Senha redefinida com sucesso"}),(0,s.jsx)("div",{className:"mt-4 bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded",children:(0,s.jsx)("p",{className:"text-center",children:"Sua senha foi redefinida com sucesso. Agora voc\xea pode fazer login com sua new password."})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(i.z,{type:"button",variant:"primary",fullWidth:!0,onClick:()=>r.push("/login"),children:"Ir para Login"})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Set new password"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below."})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:b(k),children:[u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,s.jsx)("span",{className:"block sm:inline",children:u})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(c.I,{label:"New Password",type:"password",autoComplete:"new-password",fullWidth:!0,error:null===(e=v.newPassword)||void 0===e?void 0:e.message,helperText:"Password must be at least 8 characters long",...y("newPassword",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain at least one uppercase letter, one lowercase letter, and one number"}})}),(0,s.jsx)(c.I,{label:"Confirm Password",type:"password",autoComplete:"new-password",fullWidth:!0,error:null===(t=v.confirmPassword)||void 0===t?void 0:t.message,...y("confirmPassword",{required:"Por favor, confirme sua senha",validate:e=>e===N||"Passwords do not match"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(i.z,{type:"submit",variant:"primary",fullWidth:!0,loading:g,disabled:g||!x,children:g?"Redefinindo...":"Redefinir Senha"}),(0,s.jsx)(i.z,{type:"button",variant:"outline",fullWidth:!0,onClick:()=>r.push("/login"),disabled:g,children:"Voltar para Login"})]})]})]})})}function u(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})}),children:(0,s.jsx)(d,{})})}},66651:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(3827);r(64090);let a=e=>{let{variant:t="primary",size:r="md",fullWidth:a=!1,loading:n=!1,disabled:o,children:i,className:c="",...l}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 touch-manipulation select-none"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(a?"w-full":""," ").concat(c),disabled:o||n,...l,children:[n&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i]})}},32278:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var s=r(3827);let a=(0,r(64090).forwardRef)((e,t)=>{let{label:r,error:a,helperText:n,fullWidth:o=!1,validationState:i="default",className:c="",id:l,...d}=e,u=l||"input-".concat(Math.random().toString(36).substr(2,9)),h=a?"error":i;return(0,s.jsxs)("div",{className:o?"w-full":"",children:[r&&(0,s.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:r}),(0,s.jsx)("input",{ref:t,id:u,className:"".concat("block px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-0 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900 placeholder-gray-400"," ").concat({default:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",error:"border-red-500 focus:border-red-500 focus:ring-red-500",success:"border-green-500 focus:border-green-500 focus:ring-green-500"}[h]," ").concat(o?"w-full":""," ").concat(c),...d}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:a}),n&&!a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});a.displayName="Input"},73884:function(e,t,r){"use strict";r.d(t,{LH:function(){return l},a$:function(){return i},c0:function(){return o},checkPasswordChange:function(){return c},gF:function(){return n},x4:function(){return a}});let s="http://localhost:4000",a=async e=>{let t=await fetch("".concat(s,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Login failed"}))).message||"Invalid credentials");return t.json()},n=async e=>{let t=await fetch("".concat(s,"/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Request failed"}))).message||"Failed to send password reset email")},o=async e=>{let t=await fetch("".concat(s,"/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Reset failed"}))).message||"Failed to reset password")};async function i(e){let t=await fetch("".concat(s,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to register user");return(await t.json()).user}async function c(e){let t=await fetch("".concat(s,"/api/auth/check-password-change"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error((await t.json().catch(()=>({message:"Check failed"}))).message||"Failed to check password change requirement");return t.json()}async function l(e,t){let r=await fetch("".concat(s,"/api/auth/change-password-first-login"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})});if(!r.ok)throw Error((await r.json().catch(()=>({message:"Change failed"}))).message||"Failed to change password");return r.json()}}},function(e){e.O(0,[884,971,69,744],function(){return e(e.s=44271)}),_N_E=e.O()}]);